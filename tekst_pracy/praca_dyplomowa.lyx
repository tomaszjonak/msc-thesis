#LyX 2.2 created this file. For more info see http://www.lyx.org/
\lyxformat 508
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass aghdpl
\begin_preamble
% \documentclass{aghdpl}               % przy kompilacji programem latex
% \documentclass[pdflatex,en]{aghdpl}  % praca w języku angielskim
% dodatkowe pakiety
\usepackage{enumerate}
\usepackage{listings}
% Numeracja po kolei rysunkow, tabel i wzorow
\usepackage{chngcntr}
\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}
\counterwithout{equation}{chapter}
%
\lstloadlanguages{TeX}
\usepackage{caption} 
\captionsetup[figure]{labelformat=simple, labelsep=period}
\captionsetup[table]{labelformat=simple, labelsep=period}
\captionsetup[algorithm]{labelformat=simple, labelsep=period}
%\captionsetup{font=small}
\captionsetup{margin=10pt, font={small}, labelfont=bf, format=hang}
\usepackage{esint}
\clubpenalty = 10000
\widowpenalty = 10000
%\usepackage{graphicx}
%\usepackage{grfext}
%\AtBeginDocument{%
% \PrependGraphicsExtensions*{
%    .mps,.MPS,.pdf,.PDF,.eps,.EPS,.ps,.PS,
%    .png,.PNG,.jpg,.jpeg,.JPG,.JPEG,
%    .funny,.foobar
%  }%
%  \PrintGraphicsExtensions % see .log file
%}
% \usepackage[style=numeric-comp]{biblatex}
% \setlength{\itemsep}{-1\parsep}
%---------------------------------------------------------------------------
%\usepackage{epstopdf}
\end_preamble
\options pdflatex
\use_default_options true
\maintain_unincluded_children false
\language polish
\language_package default
\inputencoding iso8859-2
\fontencoding global
\font_roman "utopia" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\graphics none
\default_output_format default
\output_sync 0
\bibtex_command bibtex
\index_command default
\float_placement H
\paperfontsize 12
\spacing onehalf
\use_hyperref true
\pdf_title "dyplom"
\pdf_author "Imie Nazwisko"
\pdf_subject "Temat"
\pdf_keywords "słowa kluczowe"
\pdf_bookmarks true
\pdf_bookmarksnumbered true
\pdf_bookmarksopen true
\pdf_bookmarksopenlevel 2
\pdf_breaklinks true
\pdf_pdfborder true
\pdf_colorlinks true
\pdf_backref false
\pdf_pdfusetitle true
\papersize default
\use_geometry false
\use_package amsmath 0
\use_package amssymb 0
\use_package cancel 1
\use_package esint 0
\use_package mathdots 0
\use_package mathtools 1
\use_package mhchem 0
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style bst/IEEEtran
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\index Indeks
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language polish
\papercolumns 1
\papersides 1
\paperpagestyle default
\listings_params "language={C++},alsolanguage={bash},breaklines=true,fontadjust=true,numberstyle={\tiny},stepnumber=1,numbersep={-7pt},numbers=right,numberstyle={\tiny},backgroundcolor={\color{cream}},basicstyle={\small}"
\tracking_changes false
\output_changes false
\html_math_output 3
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
author{Tomasz Jonak}
\end_layout

\begin_layout Plain Layout


\backslash
shortauthor{T.
 Jonak}
\end_layout

\begin_layout Plain Layout


\backslash
titlePL{Opracowanie oprogramowania do kompresji, przesylu oraz skladowania
 danych ze zdalnego systemu pomiaru parametrow ruchu drogowego}
\end_layout

\begin_layout Plain Layout


\backslash
titleEN{Development of software for compressing, transmitting and storing
 data from remote traffic measurement system}
\end_layout

\begin_layout Plain Layout


\backslash
shorttitle{Praca Magisterska}
\end_layout

\begin_layout Plain Layout


\backslash
faculty{Wydział Elektrotechniki, Automatyki,
\backslash

\backslash
Informatyki i Inżynierii Biomedycznej}
\end_layout

\begin_layout Plain Layout


\backslash
division{Katedra Metrologii i Elektroniki}
\end_layout

\begin_layout Plain Layout


\backslash
specialization{Automatyka i Robotyka}
\end_layout

\begin_layout Plain Layout


\backslash
thesistype{Praca dyplomowa magisterska}
\end_layout

\begin_layout Plain Layout


\backslash
supervisor{dr inż.
 Zbigniew Marszałek}
\end_layout

\begin_layout Plain Layout


\backslash
acknowledgements{Wymaga odkomentowania linijek w aghdpl.cls} 
\end_layout

\begin_layout Plain Layout


\backslash
date{2017} 
\end_layout

\begin_layout Plain Layout


\backslash
titlepages
\end_layout

\begin_layout Plain Layout


\backslash
setcounter{tocdepth}{2}
\end_layout

\begin_layout Plain Layout

%Te linijki zamieniaja Tabela i Rysunek na Tab.
 i Rys.
\end_layout

\begin_layout Plain Layout


\backslash
renewcommand*{
\backslash
tablename}{Tab.}
\end_layout

\begin_layout Plain Layout


\backslash
renewcommand*{
\backslash
figurename}{Rys.}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Chapter
Wprowadzenie
\begin_inset CommandInset label
LatexCommand label
name "chap:wprowadzenie"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Głównymi zaletami edytora \SpecialChar LyX
 jest automatyczna numeracja obiektów – rysunków,
 tabel, algorytmów, wzorów, rozdziałów, bibliografii i innych.
 Oznacza to, że użytkownik może skupić się na tekście – nie musi myśleć
 o tym, czy numeracja w tekście i przy danym rysunku lub tabeli będzie prawidłow
a, gdy przeniesie jeden podrozdział w inne miejsce swojej pracy.
 Numeracją zajmie się \SpecialChar LyX
 poprzez mechanizm etykiet.
\end_layout

\end_inset


\end_layout

\begin_layout Section*
Cel pracy
\end_layout

\begin_layout Standard
Niniejsza praca powstała w celu zaprojektowania oraz wdrożenia systemu służącego
 automatycznemu przesyłowi danych ze stanowiska pomiarowego do przestrzeni
 magazynowania w katedrze metrologii wydziału EAIiIB AGH w warunkach ograniczone
j przepustowości łącza.
\end_layout

\begin_layout Section*
Zakres pracy
\end_layout

\begin_layout Standard
Praca obejmuje analizę danych generowanych przez stanowisko pomiarowe, oszacowan
ie strumienia generowanych danych oraz przepustowości łącza, dobór metod
 kompresji, opracowanie mechanizmu ochrony przed utratą danych oraz projekt
 oraz implementację oprogramowania realizującego pobór, kompresję, przesył
 oraz składowanie danych.
\end_layout

\begin_layout Section*
Układ pracy
\end_layout

\begin_layout Standard
W rozdziale 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:opis_problemu"

\end_inset

 przedstawiono informacje na temat stanowiska pomiarowego oraz analizę sposobu
 generowania danych.
 W rozdziale 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:protokół_przesyłu"

\end_inset

 omówiono dostępne rozwiązania przesyłu danych.
 W rozdziale 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:synchronizacja_danych"

\end_inset

 przedstawiono przewidywane problemy w środowisku pracy oraz możliwe sposoby
 ich rozwiązania.
 Rozdział 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:kompresja"

\end_inset

 zawiera opis formatów generowanych danych, listę popularnych schematów
 kompresji oraz analizę ich sprawności w badanym przypadku oraz wybór schematu
 zastosowanego w implementowanym rozwiązaniu.
 Rozdział 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Architektura-rozwiazania"

\end_inset

 opisuje sposób działania programów klienckiego i serwerowego, dostępne
 alternatywne podejścia oraz powody ich zastosowania.
\end_layout

\begin_layout Chapter
Wstęp teoretyczny
\begin_inset CommandInset label
LatexCommand label
name "chap:Wstęp-teoretyczny"

\end_inset


\end_layout

\begin_layout Section*
Kompresja danych
\end_layout

\begin_layout Standard
Jest to transformacja która reprezentuje tą samą informację za pomocą mniejszej
 ilości bitów.
 Wyróżniamy kompresje stratną i bezstratną.
 Kompresja bezstratna zakłada istnienie nadmiarowości (redundancji) w wejściowej
 reprezentacji informacji którą można wykryć i usunać, przykładem tego typu
 kompresji jest kodowanie Huffmana (ang.
 Huffman coding)
\begin_inset CommandInset citation
LatexCommand cite
key "huffman_encoding"

\end_inset

.
 Kompresja stratna stosowana jest w przypadku gdy można wyróżnić mniej istotne
 dane i je odrzucić, przykładem takiej sytuacji jest zmniejszenie ilości
 kolorów w reprezentacji graficznej oraz usunięcie szumu w zapisie dźwiękowym.
 Przykładami tego typu kompresji są standardy JPEG
\begin_inset CommandInset citation
LatexCommand cite
key "jpeg_paper"

\end_inset

 oraz H.264
\begin_inset CommandInset citation
LatexCommand cite
key "h264_paper"

\end_inset

.
\end_layout

\begin_layout Section*
Podstawowe pojęcia obróbki plików multimedialnych
\end_layout

\begin_layout Standard
Plik wideo składa się z jednego bądź więcej 
\series bold
strumieni danych
\series default
 (ang.
 data stream).
 Strumień danych jest reprezentacją jednego bądź więcej sygnałów zapisanych
 w pewnym 
\series bold
formacie
\series default
.
 Format taki zazwyczaj posiada zestaw pożądanych cech takich jak dostosowanie
 do przesyłu bądź składowania czy szyfrowania.
 Reprezentacja danych zawarta w pliku zazwyczaj różni się od postaci która
 jest zdatna do odtworzenia (wyświetlenia, odegrania) i wymaga przetworzenia.
 Format podstawowy danego typu nazywany jest formatem nieprzetworzonym (ang.
 raw).
 W przypadku danych video reprezentacją nieprzetworzoną może być macierz
 pikseli.
 Transformacje wizyjne prowadzone są na tego typu reprezentacji.
\end_layout

\begin_layout Standard
Do przetworzenia danych stosowany jest 
\series bold
kodek
\series default
, jest to urządzenie, biblioteka bądź program udostępniający dwie składowe.
\end_layout

\begin_layout Itemize
Enkoder
\end_layout

\begin_layout Itemize
Dekoder
\end_layout

\begin_layout Standard
Enkoder służy konwersji strumienia do danego formatu - enkdowoanie.
 Dekoder realizuje odwrotną funkcjonalność - dekodowanie.
 Format wejściowy dla obu czynności nie jest wyspecyfikowany.
 Konwersja może mieć miejsce zarówno z danych nieprzetworzonych jak i dowolnego
 innego formatu.
\end_layout

\begin_layout Standard
Przykładem oprogramowania realizującego funkcje kodeka jest pakiet ffmpeg.
 Zawiera on bogaty zestaw zestaw kodeków.
 Można za jego pomocą zrealizować konwersję z formatu MJPEG do H.264 która
 jest stosowana w pracy.
\end_layout

\begin_layout Section*
Kontener (plik multimedialny)
\end_layout

\begin_layout Standard
Jest to rodzina formatów plików służący do przechowywania i synchronizacji
 wielu strumieni danych jednocześnie.
 Tego typu strumienie nazywane są ścieżkami.
 Dodatkową funkcjonalnością realizowaną przez kontener jest przechowywanie
 informacji służących do synchronizacji ścieżek w czasie.
 W przypadku plików wideo pozwala to na zagwarantowanie, że dźwięk i obraz
 w filmie nie będą się przesuwać względem siebie.
\end_layout

\begin_layout Standard
Specyfikacje formatów kontenerów zazwyczaj nie ustalają z góry jakie formaty
 strumieni danych mają zostać użyte.
 Informacja taka jest składowana razem ze ścieżkami w tzw.
 metadanych zawartych w pliku.
 Tym sposobem informacja o kodowaniu jest zapisywana razem z danymi.
 
\begin_inset CommandInset citation
LatexCommand cite
key "ho2015handbookContainers"

\end_inset


\end_layout

\begin_layout Standard
Przykładem zastosowania kontenera jest przechowywanie filmu w formacie MP4
 który zawiera ścieżkę z obrazem, ścieżkę z dźwiękiem w języku angielskim
 oraz napisy w języku polskim.
 Dźwięk zsynchronizowany jest z ruchem ust aktorów na ścieżce audio a napisy
 wyświetlają się zgodnie z sekwencjami ze ścieżki dźwiękowej.
\end_layout

\begin_layout Section*
AVI
\end_layout

\begin_layout Standard
Format kontenerów (ang.
 Audio Video Interleave) multimedialnych składających się ze ścieżek audio,
 video oraz tekstu.
 Wprowadzony do użytku przez Microsoft w Listopadzie 1992 jako część pakietu
 Video for Windows.
 AVI bazuje na standardzie RIFF (ang.
 Resource Interchange File Format).
\end_layout

\begin_layout Standard
Standard RIFF dzieli plik na segmenty (ang.
 chunk) które można zagnieżdżać bądź szeregować (segment typu list).
 Każdy segment identyfikowany jest przez ciąg 4 bajtów, kod FourCC (ang.
 four character code).
 Kody tego typu stosowane są do identyfikowania kodeków, oraz formatów kompresji
, kolorów czy kodowania pikseli.
\begin_inset CommandInset citation
LatexCommand cite
key "fourCCspec"

\end_inset


\end_layout

\begin_layout Standard
Format AVI zdefiniowany jest jako pojedynczy segment o identyfikatorze 
\begin_inset Quotes pld
\end_inset

AVI 
\begin_inset Quotes prd
\end_inset

 (spacja na ostatnim znaku).
 W którym zagnieżdżone są dwa segmenty typu LIST.
 
\begin_inset CommandInset citation
LatexCommand cite
key "microsoftAviSpec"

\end_inset


\end_layout

\begin_layout Itemize
hdrl
\end_layout

\begin_layout Itemize
movi
\end_layout

\begin_layout Standard
Lista hdrl zaczyna się segmentem avih który opisuje główny nagłówek pliku
 AVI, zawiera on informacje takie jak ilość strumieni danych, odstęp w mikroseku
ndach pomiędzy ramkami video, wymiary ramki czy obecność elementów opcjonalnych.
 Następnie pojawia się jeden bądź więcej segmentów strl typu LIST opisujących
 poszczególne ścieżki zawarte w pliku.
 Segment tego typu składa się z segmentu z dwóch części obowiązkowych: strh
 - nagłówka ścieżki, segmentu strf - formatu ścieżki oraz dwóch opcjonalnych:
 nagłówka danych ścieżki - strd i nazwy ścieżki - strn.
\end_layout

\begin_layout Standard
Nagłówek ścieżki zawiera typ ścieżki (audio, video, tekst lub midi), informacje
 o synchronizacji czasowej oraz pakiet metadanych dotyczących układu ścieżki
 w pliku.
 
\begin_inset CommandInset citation
LatexCommand cite
key "strh"

\end_inset

.
 Segmenty opcjonalne zawierają odpowiednio: dane specyficzne dla kodeka
 danej ścieżki oraz nazwę ścieżki.
\end_layout

\begin_layout Standard
Lista movi zawiera same ścieżki, dane składowe ścieżki mogą być segmentami
 bezpośrednio w liście movi bądź znajdować się w zagnieżdzoncyh listach
 o typie 
\begin_inset Quotes pld
\end_inset

rec 
\begin_inset Quotes pld
\end_inset

.
 Przynależność segmentu do strumienia odczytywana jest z kodu FourCC, który
 zawiera również informacje o przeznaczeniu segmentu.
 Wyróżnianie są cztery przeznaczenia.
\end_layout

\begin_layout Itemize
db - wideo nieskompresowane
\end_layout

\begin_layout Itemize
dc - wideo skompresowane
\end_layout

\begin_layout Itemize
pc - zmiana palety kolorów
\end_layout

\begin_layout Itemize
wb - dane audio
\end_layout

\begin_layout Standard
Kod segmentów listy movi na dwóch wyższych bajtach zawiera numer strumienia,
 dwa niższe przeznaczenie.
 Przykładowy segment nieskompresowanego wideo należący do strumienia pierwszego
 identyfikujemy kodem 
\begin_inset Quotes pld
\end_inset

01db
\begin_inset Quotes prd
\end_inset

.
 Warto nadmienić że numerowanie zaczyna się od zera, w pliku z jednym strumienie
m segmenty miałyby kod 
\begin_inset Quotes pld
\end_inset

00xx
\begin_inset Quotes prd
\end_inset

, gdzie xx oznacza typ strumienia.
\end_layout

\begin_layout Standard
Użycie 2 bajtów na identyfikację przynależności do strumienia warunkuje
 również górną granicę ilości ścieżek w pliku avi, jest to 
\begin_inset Formula $2^{8}=256$
\end_inset

.
\end_layout

\begin_layout Section*
H.264/MPEG-4 AVC
\end_layout

\begin_layout Standard
In response to the need of a more efficient video coding technique for diversifi
ed networks and applications,
\end_layout

\begin_layout Standard
Standard kompresji ścieżek video.
 Stworzony w ramach kolaboracji ITU-T VCEG oraz ISO/IEC MPEG, dwóch ciał
 standaryzacyjnych odpowiedzialnych za formaty multimedialne.
 
\begin_inset CommandInset citation
LatexCommand cite
key "h264_paper"

\end_inset


\end_layout

\begin_layout Standard
Celem tego standardu jest zapewnienie wysokiej jakości wideo przy istotnym
 zmniejszeniu szerokości pasma wymaganego do zapisu/przesyłu danych wideo.
 W porównaniu ze swoim poprzednikiem, standardem H.263 czy standardem MPEG-4
 part 2 H.264 wymaga o 50% mniej zasobów na zakodowanie strumienia.
 Wartość ta liczona jest w bitach na sekundę filmu (ang.
 bit rate).
\end_layout

\begin_layout Standard
Standard ten jest szeroko wykorzystywany w kodowaniu filmów w sieci, korzystają
 z niego między innymi serwisy Youtube, Vimeo, Itunes Store, używany jest
 również w dyskach typu Blu-ray.
 Używany jest również do dostarczania audycji telewizyjnych - standardy
 ISDB-T, DVB-T or DVB-T2.
\end_layout

\begin_layout Standard
H.264 jest standardem częściowo objętym patentami, komercyjne wykorzystanie
 dekoderów wymaga wykupienia stosownych licencji.
 
\begin_inset CommandInset citation
LatexCommand cite
key "h264patent"

\end_inset


\end_layout

\begin_layout Standard
Wysoka kompresja strumienia uzyskiwana jest dzięki zastosowaniu szeregu
 technik kodowania takich jak:
\end_layout

\begin_layout Itemize
Inter-picture prediction
\end_layout

\begin_layout Itemize
MBAFF (ang.
 Macroblock-adaptive frame-field coding)
\end_layout

\begin_layout Itemize
PAFF (ang.
 Picture-adaptive frame-field coding)
\end_layout

\begin_layout Itemize
CABAC (ang.
 Context-adaptive binary arithmetic coding)
\end_layout

\begin_layout Itemize
VLC (ang.
 variable length coding)
\end_layout

\begin_layout Itemize
VBSMC (Variable block-size motion compensation)
\end_layout

\begin_layout Standard
Dekompozycja strumienia wejściowego jest wielopoziomowa, techniki aplikowane
 są w zależności od zidentyfikowanych cech segmentów wytworzonych na poprzednich
 etapach, dokładny opis zawarty jest w dokumencie dostarczanym przez autorów.
 
\begin_inset CommandInset citation
LatexCommand cite
key "h264_paper"

\end_inset


\end_layout

\begin_layout Subsection*
Motion Compensation
\end_layout

\begin_layout Standard
Rodzina algorytmów służących przewidywaniu stanu ramki wideo na podstawie
 poprzednich oraz przyszłych ramek.
 Technika ta skupia się na popularnym w filmach sposobie zmiany sceny w
 kolejnych ramkach.
 Podstawowymi transformacjami które zmieniają sceny jest przesunięcie kamery
 oraz poruszanie się obiektu na statycznej scenie.
 Zakodowanie informacji o przesunięciach pozwala na zmniejszenie zestawu
 informacji kodującego kolejne ramki obrazu co prowadzi do bardziej wydajnej
 kompresji.
 Standard H.264 używa algorytmu VBSMC należącego do tej rodziny.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/ramka_bazowa.jpg
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Kadr z filmu 
\begin_inset Quotes pld
\end_inset

Elephants Dream
\begin_inset Quotes prd
\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:kadr_bazowy"

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
(c) copyright 2006, Blender Foundation / Netherlands Media Art Institute
 / www.elephantsdream.org
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/ramka_roznicowa.jpg
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Różnica między kadrem z 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:kadr_bazowy"

\end_inset

 a kolejnym
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:roznica_kadrow"

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
(c) copyright 2006, Blender Foundation / Netherlands Media Art Institute
 / www.elephantsdream.org
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/ramka_przesunieta.jpg
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Różnica pomiędzy 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:kadr_bazowy"

\end_inset

a kolejnym przesuniętym w prawo o dwa piksele
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:roznica_z_kompensacja"

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
(c) copyright 2006, Blender Foundation / Netherlands Media Art Institute
 / www.elephantsdream.org
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Sytuację ilustruje kodowanie obrazu za pomocą składowania różnic pomiędzy
 kolejnymi ramkami (klatkami/kadrami) filmu.
 Różnicę podstawową reprezentuje rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:roznica_kadrow"

\end_inset

 zaś różnicę w którym wzięto pod uwagę ruch kamery rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:roznica_z_kompensacja"

\end_inset

.
 Zapis z kompensacją zawiera zdecydowanie mniej informacji na rysunku co
 przekłada się na bardziej regularny ciąg bitów.
 Regularna struktura pozwala z kolei na dużo silniejszą kompresję co prowadzi
 do mniejszego wynikowego rozmiaru pliku i mniejszego bit rate.
\end_layout

\begin_layout Section*
Model TCP/IP
\end_layout

\begin_layout Standard
Abstrakcyjny model opisujący komunikację pomiędzy komputerami połączonymi
 internetem.
 Model ten opisuje pełen schemat komunikacji specyfikując sposób pakowania,
 adresowania, kierowania (ang.
 routing) i odbioru danych.
 Składa się z czterech warstw abstrakcji które służą klasyfikacji protokołów
 składowych.
 Zaczynając od najniższej:
\end_layout

\begin_layout Enumerate
Warstwa łącza (ang.
 link layer)
\end_layout

\begin_layout Enumerate
Warstwa sieci (ang.
 internet layer)
\end_layout

\begin_layout Enumerate
Warstwa transportowa (ang.
 transport layer)
\end_layout

\begin_layout Enumerate
Warstwa aplikacji (ang.
 application layer)
\end_layout

\begin_layout Standard
Warstwa łącza opisuje transmisję danych wewnątrz pojedynczego segmentu sieci.
 Komunikacja ta odbywa się za pomocą kanału fizycznego bezpośrednio łączącego
 dwie maszyny.
 Opisują adresację oraz sposób enkodowania.
 Adres warstwy łącza zwyczajowo nazywany jest adresem MAC (ang.
 Media Access Control).
 Przykładem tego rozwiązania jest połączenie kablem typu twisted-pair (tzw.
 skrętka) i użycie protokołu Ethernet.
\end_layout

\begin_layout Standard
Warstwa sieci opisuje komunikację urządzeń zlokalizowanych w różnych sieciach
 oraz sposób odnalezienia drogi do sieci docelowej (routing).
 Najpopularniejszym protokołem w tej warstwie jest Internet Protocol w wersji
 4.
 Protokół ten wprowadza również adresację warstwy sieciowej, tzw.
 adresy IP.
 Warstwa ta nie definiuje mechanizmów gwarantujących dotarcie danych do
 odbiorcy oraz nie specyfikuje kolejności w jakiej kwanty danych (pakiety)
 odbierze maszyna docelowa.
\end_layout

\begin_layout Standard
Warstwa transportowa opisuje sposób komunikacji pomiędzy usługami znajdującymi
 się na dwóch urządzeniach, wprowadza oddzielną adresację pozwalającą na
 rozróżnienie usług udostępnianych przez pojedyncze urządzenie - portów.
 Protokoły tej warstwy odpowiadają za poprawne współdzielenie kanału komunikacyj
nego przez wiele usług, serializację, deserializację, retransmisję oraz
 odtwarzanie oryginalnej kolejności danych.
 Najpopularniejszymi protokołami tej warstwy są UDP (ang.
 User Datagram Protocol) oraz TCP (Transfer Control Protocol).
\end_layout

\begin_layout Standard
Warstwa aplikacji definiuje sposób komunikacji pomiędzy serwisami.
 Jest to najszersza warstwa ze względu na potrzebę dostosowania do konkretnych
 problemów.
 Popularnym protokołem tej warstwy jest protokół HTTP (ang.
 Hypertext Transfer Protocol) służący transferowi i modyfikacji multimediów.
\end_layout

\begin_layout Subsection*
Datagram
\end_layout

\begin_layout Standard
Termin używany do opisu kwantu danych używanego przez dany protokół.
 Składa się z nagłówka (ang.
 header), danych (ang.
 payload) oraz opcjonalnego 
\begin_inset Quotes pld
\end_inset

trailera
\begin_inset Quotes prd
\end_inset

 (pol.
 stopka).
 W zależności od protokołu z perspektywy którego prowadzona jest analiza
 danymi może być datagram innego protokołu, prowadzi to do struktury kapsułkowej.
 Datagram najniższej warstwy zawierał będzie szereg headerów kolejnych protokołó
w oraz finalne dane i trailer.
 Ilustruje to rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:datagram"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/payload.jpg
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Przykładowy datagram protokołu HTTP w sieci TCP/IP
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:datagram"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
TCP
\end_layout

\begin_layout Standard
Protokół warstwy transportowej.
 Odpowiada za komunikację pomiędzy dwoma urządzeniami, tzw.
 hostami, komunikującymi się za pomocą sieci internetowej.
 Z perspektywy użytkownika najważniejszymi cechami protokołu TCP są:
\end_layout

\begin_layout Itemize
uporządkowany przesył danych (ang.
 ordered data transfer)
\end_layout

\begin_layout Itemize
retransmisja zgubionych pakietów (ang.
 packet retranssmision)
\end_layout

\begin_layout Itemize
zgodność danych nadanych z odebranymi (ang.
 error-free transmission)
\end_layout

\begin_layout Itemize
kontrola przepływu do odbiorcy (ang.
 flow control)
\end_layout

\begin_layout Itemize
kontrola przepływu po sieci (ang.
 congestion control)
\end_layout

\begin_layout Standard
TCP jest protokołem stanowym, wymaga otwarcia połączenia (ang.
 connection) do którego należą wysyłane pakiety.
 Dane odbierane od nadawcy oraz dostarczane do klienta nie posiadają wymagań
 co do struktury, traktowane są jak strumień bajtów (ang.
 bytestream), którego przygotowanie i odczytanie zgodnie z wybranym zestawem
 reguł - protokołem warstwy aplikacji.
 Początek i koniec strumienia sygnalizują odpowiednie sekwencje kontrolne
 protokołu.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Wstawić tu tcp header?
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection*
Sekwencja otwarcia połączenia
\end_layout

\begin_layout Standard
Nagłówek TCP posiada 9 bitów kontrolnych posiadających odpowiednie 3 literowe
 skróty:
\end_layout

\begin_layout Itemize
CWR
\end_layout

\begin_layout Itemize
ECE
\end_layout

\begin_layout Itemize
URG
\end_layout

\begin_layout Itemize
ACK
\end_layout

\begin_layout Itemize
PSH
\end_layout

\begin_layout Itemize
RST
\end_layout

\begin_layout Itemize
SYN
\end_layout

\begin_layout Itemize
FIN
\end_layout

\begin_layout Standard
Do nawiązania połączenia wykorzystywane są bity SYN oraz ACK, w nawiązaniu
 połączenia wyróżniamy klienta - stronę nawiązującą połączenie oraz serwer
 - stronę nasłuchującą.
 Sekwencja ma następującą postać.
\end_layout

\begin_layout Enumerate
Klient wysyła pakiet z flagą SYN
\end_layout

\begin_layout Enumerate
Serwer odpowiada pakietem z flagami SYN oraz ACK
\end_layout

\begin_layout Enumerate
Klient wysyła pakiet z flagą ACK
\end_layout

\begin_layout Standard
Po odebraniu ostatniego pakietu sesję uznaje się za poprawnie zainicjowaną
 i obie strony mogą przejść do przesyłu i odbioru danych.
\end_layout

\begin_layout Subsubsection*
Retransmisje
\end_layout

\begin_layout Standard
Nagłówek pakietu TCP posiada dwa 32 bitowe pola służące śledzeniu kolejności
 pakietów i potwierdzenia ich odbioru.
 Są to odpowiednio numer sekwencyjny (ang.
 sequence number) oraz numer potwierdzenia (ang.
 acknowledgement number).
 Na każdy wysłany pakiet o danym numerze sekwencyjnym N oczekiwany jest
 pakiet nadany przez serwer z flagą ACK oraz numerem sekwencyjnym o wartości
 N.
\end_layout

\begin_layout Standard
Potrzebę retransmisji można zidentyfikować na podstawie przekroczenia wartości
 oczekiwania (ang.
 timeout) na potwierdzenie danego pakietu oraz bazując na otrzymanej sekwencji
 potwierdzeń.
 Ilustruje to poniższy przykład.
\end_layout

\begin_layout Standard
W przypadku gdy pakiet zostanie zgubiony (o numerze sekwencyjnym N+1), zgodnie
 z protokołem odbiorca nie może wysłać pakietu ACK z wartością N+1 ani żadną
 następną aż do otrzymania pakietu, ponownie wysyła więc pakiet ACK dla
 ostatniego poprawnie odebranego pakietu (numer N).
 Otrzymanie trzykrotnie potwierdzenia dla pakietu N sygnalizuje nadawcy
 potrzebę retransmisji pakietu N+1.
\end_layout

\begin_layout Subsubsection*
Sekwencja zamknięcia
\end_layout

\begin_layout Standard
Poprawne zamknięcie sesji wykorzystuje flagi FIN oraz ACK.
 Może zostać zainicjowana przez każdą ze stron.
 Na potrzeby przykładu użyte zostały nazwy inicjator i odbiorca.
\end_layout

\begin_layout Enumerate
Inicjator wysyła pakiet z flagą FIN
\end_layout

\begin_layout Enumerate
Odbiorca wysyła pakiet z flagą ACK
\end_layout

\begin_layout Enumerate
Odbiorca wysyła pakiet z flagą FIN
\end_layout

\begin_layout Enumerate
Inicjator wysyła pakiet z flagą ACK
\end_layout

\begin_layout Standard
Kroki 2 oraz 3 mogą zostać zrealizowane za pomocą jednego pakietu wysłanego
 przez odbiorcę.
 Wysłanie pakietu FIN przez nadawcę sygnalizuje odbiorcy że nie otrzyma
 od niego więcej danych, sesję zamkniętą z jednej strony nazywamy half-open
 (pol.
 pół-otwartą).
\end_layout

\begin_layout Subsection*
UDP
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
czy udp jest w ogóle interesujące z perspektywy pracy?
\end_layout

\end_inset


\end_layout

\begin_layout Section*
Berkeley sockets
\end_layout

\begin_layout Standard
API (ang.
 application programming interface) służący do realizowania komunikacji
 za pomocą gniazd (ang.
 socket).
 Pozwala na użycie protokołów transportowych, zarówno sieciowych (TCP, UDP)
 jak i realizujących komunikację pomiędzy procesami na jednej maszynie (Unix
 Sockets).
 Zostały wprowadzone w wersji 4.2 systemu operacyjnego BSD z rodziny Unix
 w 1983 roku.
 Ze względu na szerokie stosowanie stały się częścią standardu POSIX.
 Obecnie dostępne we wszystkich systemach spełniających ten standard oraz
 od 1990 w systemach z rodziny Windows.
 
\begin_inset CommandInset citation
LatexCommand cite
key "winsocks"

\end_inset


\end_layout

\begin_layout Standard
Socket jest abstrakcyjnym obiektem za pomocą którego dany proces prowadzi
 interakcje z innym procesem lokalnym bądź zdalnym.
 Elementem pośredniczącym w takiej komunikacji jest jądro systemu operacyjnego
 mające dostęp do innych procesów w przypadku komunikacji lokalnej oraz
 do sterowników kart sieciowych w przypadku komunikacji zdalnej.
\end_layout

\begin_layout Standard
Wydziela się dwa główne tryby pracy z gniazdami:
\end_layout

\begin_layout Itemize
pakietowy
\end_layout

\begin_layout Itemize
strumieniowy
\end_layout

\begin_layout Standard
Podział ten jest ściśle związany z protokołami które reprezentuje socket.
 Tryb pakietowy zakłada wysyłanie i odbieranie pojedynczych pakietów, tryb
 strumieniowy otwiera zaś pomost za pomocą którego wysyłana jest arbitralna
 ilość danych.
 Obie funkcjonalności realizuje się za pomocą tego samego zestawu funkcji
 systemowych jednak różni się obsługa informacji zwrotnej z wywołania.
\end_layout

\begin_layout Standard
API dostarczane jest użytkownikowi w postaci zestawu plików nagłówkowych
 oraz bibliotek dynamicznie linkowanych języka C.
 Taki sposób udostępniania podyktowany jest językiem w jakim napisane są
 systemy operacyjne - zarówno Windows jak i Linux napisane zostały w C -
 oraz możliwością wywoływania tego typu interfejsów w innych językach.
 Przykładowo pliki wykonywalne języka C++ można automatycznie linkować z
 bibliotekami w języku C, język Python udostępnia do tego bibliotekę ctypes
 oraz uogólniony język Cython.
 W przypadku języków interpretowanych implementacje maszyn wirtualnych napisane
 są w języku C co pozwala na udostępnienie tego interfejsu w językach bazujących
 na danej maszynie wirtualnej - przykładem będzie tu JVM oraz języki Java,
 Scala i Kotlin.
\end_layout

\begin_layout Subsection*
Opis interfejsu
\end_layout

\begin_layout Standard
Tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:socket_calls"

\end_inset

 zawiera zestaw wywołań wymagany do rozpoczęcia komunikacji za pomocą dowolnego
 protokołu z użyciem gniazd w systemie operacyjnym Linux.
 
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="14" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top" width="35page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Nazwa Wywołania
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Plik nagłówkowy
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Opis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
socket()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Tworzy nowe gniazdo zadanego typu oraz zwraca jego deskryptor
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
bind()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Łączy gniazdo z systemowym zasobem, w przypadku protokołu TCP jest to para
 (adres ip, port) reprezentująca port na konkretnym interfejsie sieciowym.
 Używany po stronie serwera.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
listen()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ustawia socket w tryb pasywny, nasłuchujący na przychodzące połączenia.
 Używany po stronie serwera.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
connect()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Nawiązuje połączenie na zadany adres, przydzielając losowy port z puli 1024-6553
5.
 Używany po stronie klienta.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
accept()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Tworzy nowy socket reprezentujący nawiązane połączenie po stronie klienta,
 wywołanie używane po stronie serwera.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
recv()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h.>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Służy odbieraniu danych z socketu.
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
send()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Służy nadawaniu danych za pomocą socketu.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
shutdown()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Inicjuje sekwencję zamykającą dane połączenie.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
close()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<unistd.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zwalnia zasoby systemowe odpowiadające danemu socketowi.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
getsockopt()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Sprawdza dany atrybut gniazda.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
setsockopt()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/socket.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ustawia dany atrybut gniazda.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
select()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<sys/select.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Pozwala uśpić dany wątek systemowy do czasu pojawienia się danych na jednym
 bądź więcej socketach.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
poll()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<poll.h>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Analogicznie do select(), pozwala również zakończyć oczekiwanie po interwale
 bądź sprawdzić dostępność danych nie blokując obecnego wątku.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Funkcje interfejsu socket 
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:socket_calls"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Parametry danego wywołania oraz dokładny opis można uzyskać wpisując w konsoli
 polecenie:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

man <nazwa wywołania bez nawiasów>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Wynik polecenia dla wywołania connect() przedstawia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:man_connect"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/man_connect.JPG
	lyxscale 50
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Opis wywołania connect()
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:man_connect"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
Nawiązywanie połączenia TCP
\end_layout

\begin_layout Standard
Po stronie serwera wymagane są następujące czynności:
\end_layout

\begin_layout Enumerate
Zdefiniowanie struktury typu sockaddr_in zawierającej informacje o typie
 adresu oraz jego wartości, w przypadku TCP będzie to rodzina AF_INET reprezentu
jąca adres protokołu IP oraz port protokołu TCP.
\end_layout

\begin_layout Enumerate
Stworzenie gniazda za pomocą wywołania funkcji socket() z parametrami AF_INET,
 SOCK_STREAM, IPPROTO_TCP
\end_layout

\begin_layout Enumerate
Skojarzenie adresu oraz gniazda za pomocą funkcji bind()
\end_layout

\begin_layout Enumerate
Rozpoczęcie nasłuchiwania, tzw.
 otworzenie portu, za pomocą funkcji listen()
\end_layout

\begin_layout Enumerate
Wywołanie funkcji accept() tworzącej nowe gniazdo dla każdego połączenia
 przychodzącego
\end_layout

\begin_layout Enumerate
Interakcje z procesem zdalnym używając funkcji recv() oraz send()
\end_layout

\begin_layout Enumerate
Zamknięcie połączenia używając funkcji shutdown()
\end_layout

\begin_layout Enumerate
Zwolnienie gniazd odpowiadających za połączenie funkcją close()
\end_layout

\begin_layout Standard
Kod reprezentujący powyższe czynności reprezentuje listing 
\begin_inset Note Note
status open

\begin_layout Plain Layout
jak to tagować?
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

#define ADRES_SERWERA "127.0.0.1"
\end_layout

\begin_layout Plain Layout

#define PORT_SERWERA 15123
\end_layout

\begin_layout Plain Layout

#define DLUGOSC_KOLEJKI_OCZEKUJACYCH_POLACZEN 10
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

int main() 
\end_layout

\begin_layout Plain Layout

{   
\end_layout

\begin_layout Plain Layout

  struct sockaddr_in endpoint = {
\end_layout

\begin_layout Plain Layout

    .sin_family = AF_INET,
\end_layout

\begin_layout Plain Layout

    .sin_port = htons(PORT_SERWERA),
\end_layout

\begin_layout Plain Layout

    .sin_addr.s_addr = inet_addr(ADRES_SERWERA)
\end_layout

\begin_layout Plain Layout

  };
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

  int socket_descriptor = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
\end_layout

\begin_layout Plain Layout

  
\end_layout

\begin_layout Plain Layout

  bind(socket_descriptor, (struct sockaddr*)&endpoint, sizeof(endpoint));
\end_layout

\begin_layout Plain Layout

  
\end_layout

\begin_layout Plain Layout

  listen(socket_descriptor, DLUGOSC_KOLEJKI_OCZEKUJACYCH_POLACZEN);
\end_layout

\begin_layout Plain Layout

  
\end_layout

\begin_layout Plain Layout

  for (;;) {
\end_layout

\begin_layout Plain Layout

    int connection_descriptor = accept(socket_descriptor, NULL, NULL);
\end_layout

\begin_layout Plain Layout

    /*
\end_layout

\begin_layout Plain Layout

      Interakcje z klientem
\end_layout

\begin_layout Plain Layout

    */
\end_layout

\begin_layout Plain Layout

    shutdown(connection_descriptor, SHUT_RDWR);
\end_layout

\begin_layout Plain Layout

    close(connection_descriptor);
\end_layout

\begin_layout Plain Layout

  }
\end_layout

\begin_layout Plain Layout

  return 0;
\end_layout

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
W programie odwołania do danego gniazda wykonywane są za pomocą unikalnego
 numeru nadawanego nowo wytworzonemu socketowi.
 Wywołania systemowe następnie mapują ten identyfikator na właściwe zasoby.
 W programie wyróżnione są dwa typy gniazd, służące przyjmowaniu połączeń
 oraz reprezentujące pojedyncze połączenie.
 Funkcja listen inicjuje kolejkę w jądrze systemu operacyjnego, pozwala
 ona na przechowanie połączeń przychodzących do czasu gdy program jest w
 stanie je obsłużyć.
\end_layout

\begin_layout Standard
Od strony klienckiej wymagane są następujące kroki:
\end_layout

\begin_layout Enumerate
Stworzenie struktury reprezentujący adres ip oraz port z którym nawiązane
 zostanie połączenie
\end_layout

\begin_layout Enumerate
Stworzenie gniazda używając funkcji socket() z parametrami odpowiadającymi
 połączeniu TCP
\end_layout

\begin_layout Enumerate
Wywołanie funkcji connect() przekazując adres z punktu 1 oraz socket z punktu
 2.
\end_layout

\begin_layout Enumerate
Interakcje za pomocą gniazda używając funkcji send() i recv()
\end_layout

\begin_layout Enumerate
zamknięcie połączenia funkcją shutdown()
\end_layout

\begin_layout Enumerate
zwolnienie deskryptora funkcją close()
\end_layout

\begin_layout Standard
Kod reprezentujący klienta łączącego się z serwerem z listingu 
\begin_inset Note Note
status open

\begin_layout Plain Layout
tego wyżej
\end_layout

\end_inset

 przedstawia listing 
\begin_inset Note Note
status open

\begin_layout Plain Layout
otaguj to jakos
\end_layout

\end_inset

.
 Ponownie pominięto obsługę błędów.
 Oba programy znajdują się w załącznikach do pracy.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

#define ADRES_SERWERA "127.0.0.1"
\end_layout

\begin_layout Plain Layout

#define PORT_SERWERA 15123
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

int main() {
\end_layout

\begin_layout Plain Layout

  struct sockaddr_in endpoint = {
\end_layout

\begin_layout Plain Layout

    .sin_family = AF_INET,
\end_layout

\begin_layout Plain Layout

    .sin_port = htons(PORT_SERWERA),
\end_layout

\begin_layout Plain Layout

    .sin_addr.s_addr = inet_addr(ADRES_SERWERA)
\end_layout

\begin_layout Plain Layout

  };
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

  int socket_descriptor = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

  connect(socket_descriptor, (struct sockaddr*)&endpoint, sizeof(endpoint));
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

  /*
\end_layout

\begin_layout Plain Layout

    interakcje z serwerem
\end_layout

\begin_layout Plain Layout

  */
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

  shutdown(socket_descriptor, SHUT_RDWR);
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

  close(socket_descriptor);
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

  return 0;
\end_layout

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
W tym wypadku tworzony jest jedynie socket reprezentujący połączenie.
 Wywołanie funkcji connect wymaga, aby urządzenie reprezentujące drugą stronę
 połączenia posiadało socket w stanie listen, w momencie kiedy kod serwera
 wywoła instrukcję accept.
 Pełny schemat interakcji klient serwer reprezentuje rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:client_server"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/klient_serwer_berkeley.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Komunikacja klient serwer z użyciem gniazd
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:client_server"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
Budowa socketu
\end_layout

\begin_layout Standard
Stos sieciowy, będący w systemach z rodziny Windows i Linux częścią jądra
 systemu operacyjnego dla każdego aktywnego połączenia utrzymuje strukturę
 danych TCB (ang.
 TCP control block) oraz dwa bufory, do obsługi danych wychodzących i przychodzą
cych.
 Za nadawanie i odbieranie danych odpowiedzialna jest karta sieciowa, która
 za pomocą zdefiniowanego mechanizmu (przerwanie lub odpytywanie przez jądro)
 raportuje przychodzące dane.
 Dane te są następnie szeregowane zgodnie z numerami sekwencyjnymi i składowanie
 w buforze przychodzącym do momentu odebrania ich przez klienta przy użyciu
 funkcji recv().
\end_layout

\begin_layout Standard
Socket obsługujący połączenie po stronie jądra składa się ze struktury kontrolne
j TCP (ang.
 TCP control block) reprezentującej stan połączenia oraz zestaw parametrów
 opisujących połączenie (częstotliwość wysyłania, numer sekwencyjny, licznik
 bezczynności) oraz dwie kolejki, odpowiadające za dane przychodzące oraz
 wychodzące.
\end_layout

\begin_layout Standard
Za nadawanie i odbieranie bezpośrednio odpowiada NIC (ang.
 network interface card) karta sieciowa.
 Której sterownik współpracując z tzw.
 stosem sieciowym odpowiada za poprawne stworzenie bądź zinterpretowanie
 nagłówków kolejnych warstw stosu TCP/IP i umieszczenie bądź pobranie danych
 w kolejkach.
 Sytuację przedstawia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:tcp_socket_stack"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/socket_example.jpg
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Elementy odpowiedzialne za komunikację TCP z użyciem socketów
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:tcp_socket_stack"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Analiza problemu
\begin_inset CommandInset label
LatexCommand label
name "chap:opis_problemu"

\end_inset


\end_layout

\begin_layout Standard
Katedra metrologii prowadzi badania dotyczące odczytu informacji o pojazdach
 poruszających się po drodze za pomocą zestawu sensorów.
 Czujniki takie zostały zamontowane na odcinku autostrady w miejscowości
 Gardawice 
\begin_inset Note Note
status open

\begin_layout Plain Layout
[link do papieru]
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/stanowisko_pomiarowe.JPG
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat stanowiska pomiarowego 
\begin_inset Note Note
status open

\begin_layout Plain Layout
(dodac ref do oryginalu)
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:schemat_stanowiska"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
W skład stanowiska pomiarowego wchodzą czujniki spięte z układem przetwarzania
 do postaci cyfrowej, kamera oraz komputer.
 Oprogramowanie napisane w środowisku LabVIEW odpowiada za zapisanie na
 dysku przebiegów czasowych sygnałów oraz sekwencji video zarejestrowanych
 w trakcie przejazdu pojazdu.
\end_layout

\begin_layout Standard
Komputer służący do przechowywania pomiarów jest również podłączony do sieci.
 Pomiędzy stanowiskiem pomiarowym a siecią na uczelni zestawiony jest tunel
 VPN (ang.
 Virtual Private Network).
 Pozwala to na zdalne zarządzanie środowiskiem przy jednoczesnym zapewnieniu
 bezpieczeństwa komunikacji (szyfrowanie, uwierzytelnienie, integralność
 danych).
\end_layout

\begin_layout Standard
Schemat sieciowy zaprezentowany został na rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:schemat_sieciowy"

\end_inset

.
 Stanowisko z rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:schemat_stanowiska"

\end_inset

 zaprezentowane zostało jako Gardawice.
 Interakcje z Gardawicami możliwe są za pomocą środowiska Cygwin które pozwala
 używać maszyny z systemem operacyjnym Windows w konwencji Unixowej.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/schemat_sieciowy_stanowiska.jpg
	lyxscale 60
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat sieciowy
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:schemat_sieciowy"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Struktura generowanych danych
\begin_inset CommandInset label
LatexCommand label
name "sec:Struktura-generowanych-danych"

\end_inset


\end_layout

\begin_layout Standard
Każdy pomiar - przejazd pojazdu - składa się z dwóch plików.
 Danych o rozszerzeniu lvm który posiada strukturę csv (ang.
 comma separated values) oraz wideo w formacie avi (ang.
 Audio Video Interleave).
 Pliki te posiadają tą samą nazwę oraz rozszerzenie odpowiednio avi i lvm,
 zgodną ze schematem przedstawionym w tabeli 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:nazwa_pliku"

\end_inset

 oraz ścieżkę o regularnej strukturze zgodną ze schematem przedstawionym
 w tabeli 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:nazwa_folderu"

\end_inset

.
\end_layout

\begin_layout Standard
Komórki pogrubione w tabelach 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:nazwa_pliku"

\end_inset

 i 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:nazwa_folderu"

\end_inset

 stanowią zmienne zależne od momentu wygenerowania pliku.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="8">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
M
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Rok
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Miesiąc
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Dzień
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
_
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Godzina
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Minuta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Sekunda
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat nazwy generowanego pliku
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:nazwa_pliku"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Nazwa pliku koduje czas wykonania pomiaru, dokładny schemat generowanej
 nazwy reprezentuje tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:nazwa_pliku"

\end_inset

.
 Pliki zaś grupowane są w foldery odpowiadające dniom w których zostały
 wygenerowane.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="6">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
R
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Rok
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
_
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Miesiąc
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
_
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Dzień
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat nazwy generowanego folderu
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:nazwa_folderu"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Katalogi z dniami pomiarowymi zgrupowane są w pojedynczej lokalizacji na
 dysku, jej zawartość prezentuje rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:gardawice_katalog_pomiary"

\end_inset

.
 Prócz katalogów z kolejnymi dniami w lokalizacji znajdują się foldery skompreso
wane.
 Są to ślady ręcznej ingerencji mającej na celu zmniejszenie ilości miejsca
 na dysku zajmowanej przez pomiary oraz przygotowanie do przekopiowania
 na zewnętrzny nośnik i przetransportowanie na uczelnię.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/gardawice_widok_pomiarow.JPG
	lyxscale 50
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Katalog główny danych pomiarowych
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:gardawice_katalog_pomiary"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Zawartość katalogu zawierającego pomiary z 5 maja 2018 przedstawia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:pomiary_z_jednego_dnia"

\end_inset

.
 Zrzut ekranu został wykonany 13 maja, w ciągu 24h stanowisko pomiarowe
 wygenerowało 11376 plików o łącznej wadze 7.1 Gigabajta.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/zawartosc_pojedynczego_folderu_z_pomiarami.JPG

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Katalog z pomiarami z jednego dnia
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:pomiary_z_jednego_dnia"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Schemat generowania danych posiada dwa zaburzenia.
\end_layout

\begin_layout Itemize
Pomiary zarejestrowane tuż przed północą mogą znaleźć się w folderze następnego
 dnia
\end_layout

\begin_layout Itemize
Plik avi może nie zostać wygenerowany
\end_layout

\begin_layout Section
Analiza ilościowa
\begin_inset CommandInset label
LatexCommand label
name "sec:Analiza-ilościowa"

\end_inset


\end_layout

\begin_layout Standard
Na potrzeby oszacowania strumienia danych przeanalizowano zestaw wygenerowany
 pomiędzy 11.11.2017 a 10.12.2017.
 W tym przedziale czasowym stanowisko pobierało pomiary bez przerw które
 mogłyby zaburzyć dalsze oszacowania takich jak przerwy w zasilaniu czy
 zapełnienie powierzchni dyskowej.
\end_layout

\begin_layout Standard
Dziennie generowanych jest ok.
 6 tysięcy par plików.
 Ilość pomiarów jest ściśle związana z natężeniem ruchu drogowego, stąd
 można zakładać okresowe wahania spowodowane m.in cyklem dobowym oraz świętami.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Typ pliku
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
średnia wielkości [B]
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
mediana wielkości [B]
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
odchylenie standardowe [B]
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lvm
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
838487
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
840305
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6773
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
avi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
504104
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
555008
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
133490
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Własności statystyczne pomiarów
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:wielkosci_plikow"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Zgodnie z tabelą 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:wielkosci_plikow"

\end_inset

 pliki avi posiadają o 2 rzędy wielkości większą wariancję niż pliki avi,
 należy więc spodziewać się skokowych zmian w obciążeniu systemu wysyłania
 rozumianego jako wartość strumienia danych na sekundę.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/wielkosci_dobowe_avi.jpeg
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Zależność wielkości pliku avi od momentu pomiaru
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "rys:wielkosc_avi"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rysunek 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wielkosc_avi"

\end_inset

 przedstawia zależność wielkości filmu (pliku avi) od godziny jego wykonania,
 uśrednienie zostało dokonane z dokładnością do minut.
 Najistotniejsze zmiany wielkości plików występują ok godziny 7 oraz 16
 które w analizowanym okresie pokrywają się z godzinami wschodu i zachodu
 słońca.
 Na podstawie wykresu można stwierdzić, że zmiana związana z cyklem słonecznym
 jest najistotniejszym składnikiem wariancji.
\end_layout

\begin_layout Standard
Na wykresie można zaobserwować również zerowy pomiar, w projekcie aplikacji
 należy zatem uwzględnić możliwość obsłużenia takiego wypadku.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/wielkosci_dobowe_lvm.jpeg
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Zależność wielkości pliku lvm od momentu pomiaru
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:wielkosci_lvm"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rysunek 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wielkosci_lvm"

\end_inset

został wyskalowany podobnie do 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wielkosc_avi"

\end_inset

.
 Dzięki temu zabiegowi można zauważyć różnicę w zmienności wielkości obu
 typów plików.
 Elementem wartym odnotowania jest kolejna 
\begin_inset Quotes pld
\end_inset

szpilka
\begin_inset Quotes prd
\end_inset

 oznaczająca pomiar zerowej wielkości.
\end_layout

\begin_layout Section
Średni strumień danych
\begin_inset CommandInset label
LatexCommand label
name "sec:Średni-strumień-danych"

\end_inset


\end_layout

\begin_layout Standard
Metryką użytą do planowania struktury rozwiązania został średni strumień
 danych, jego wartość wyliczona została dzieląc sumę danych wygenerowanych
 w ciągu badanego okresu przez ilość sekund składających się na ten okres.
 
\end_layout

\begin_layout Standard
\begin_inset Formula $S=\frac{V}{T}\,[\frac{B}{s}]$
\end_inset

, s - strumień, V - ilość danych w bajtach, T - czas
\end_layout

\begin_layout Standard
Obliczenia przeprowadzono dla 30 pełnych dni (11.11 - 10.12) po 24 godziny.
\end_layout

\begin_layout Standard
\begin_inset Formula $T=30*24*60*60=2592000\,s$
\end_inset


\end_layout

\begin_layout Standard
Sumaryczny strumień danych obliczony na podstawie danych z plików lvm_results.csv
 oraz avi_results.csv.
 Zawierają one kolumny z czasem pomiaru oraz wielkością pliku z danymi pomiarowy
mi.
 Zostały one wygenerowane na podstawie stanu przestrzeni dyskowej stanowiska
 pomiarowego w dniu 20.02.2018r.
 Dostępne do wglądu w <gdziekolwiek ta praca będzie dostępna>.
\end_layout

\begin_layout Standard
\begin_inset Formula $V_{avi}=84359710\,kB$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $V_{lvm}=140709087\,kB$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $V=V_{avi}+V_{lvm}=225068797kB$
\end_inset


\end_layout

\begin_layout Standard
Na podstawie powyższych danych średni strumień wynosi.
\end_layout

\begin_layout Standard
\begin_inset Formula $S=\frac{225068797\,kB}{2592000\,s}\approx86.8\,\frac{kB}{s}$
\end_inset


\end_layout

\begin_layout Standard
Należy również pamiętać o zmienności dobowej w wielkości plików avi.
\end_layout

\begin_layout Section
Łącze sieciowe
\begin_inset CommandInset label
LatexCommand label
name "sec:Łącze-sieciowe"

\end_inset


\end_layout

\begin_layout Standard
Prędkość przesyłu danych ze stanowiska pomiarowego do uczelni została zmierzona
 za pomocą programu scp, użyty został do tego celu plik ze skompresowanymi
 pomiarami z jednego dnia 
\begin_inset Note Note
status open

\begin_layout Plain Layout
(TODO: w sumie to i tak idzie w tunelu, wpadł tam narzut na szyfrowanie,
 jak wstanie trzeba powtórzyć na gołym tcp, np netcatem).
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Średnia przepustowość wewnątrz tunelu została oszacowana na 12 kb/s jest
 to wielkość ponad 7 razy mniejsza od średniego strumienia danych.
 Uniemożliwia to bezpośrednie zastosowanie standardowych narzędzi stosowanych
 do przesyłania plików FTP (ang.
 File Transfer Protocol), SCP (ang.
 Secure Copy Protocol) czy program rsync.
\end_layout

\begin_layout Standard
W obecnym schemacie pracy stanowiska odbiór danych wymaga manualnego przekopiowa
nia pomiarów na nośnik i przewiezienia ich na uczelnię.
\end_layout

\begin_layout Standard
co uniemożliwia przesył danych w czasie rzeczywistym przy zastosowaniu standardo
wych rozwiązań takich jak FTP (ang.
 File Transfer Protocol), SCP (ang.
 Secure Copy Protocol) czy program rsync.
 Odbiór danych wymaga fizycznego dostępu do maszyny i przekopiowania danych
 na inny nośnik bądź zastosowania kompresji.
 Szerszy opis relacji przepustowości do kompresji został przedstawiony w
 podrozdziale 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Kompresja"

\end_inset

.
\end_layout

\begin_layout Standard
Drugim istotnym aspektem połączenia jest jego dostępność, zaobserwowane
 zostały przerwy w łączności sięgające tygodnia.
\end_layout

\begin_layout Section
Kompresja
\begin_inset CommandInset label
LatexCommand label
name "sec:Kompresja"

\end_inset


\end_layout

\begin_layout Standard
Na podstawie danych z podrozdziałów 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Średni-strumień-danych"

\end_inset

 i 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Łącze-sieciowe"

\end_inset

 w celu eliminacji problemu zapełniania się dysku w Gardawicach wymagana
 jest kompresja danych przed wysłaniem.
 Najwolniejszym elementem systemu jest połączenie sieciowe, z tego powodu
 analiza kompresji prowadzona jest pod kątem stopnia kompresji z pominięciem
 czasów działania poszczególnych algorytmów.
\end_layout

\begin_layout Standard
Przy średnim strumieniu generowanym przez stanowisko pomiarowe
\end_layout

\begin_layout Standard
\begin_inset Formula $S_{in}=86.8\,\frac{kB}{s}$
\end_inset


\end_layout

\begin_layout Standard
oraz przepustowości sieci (strumieniu wyjściowym)
\end_layout

\begin_layout Standard
\begin_inset Formula $S_{out}=12\,\frac{kB}{s}$
\end_inset


\end_layout

\begin_layout Standard
wymagany stopień kompresji aby zrównać strumień generowany z maksymalnym
 strumieniem wyjściowym
\end_layout

\begin_layout Standard
\begin_inset Formula $c_{r}=\frac{S_{in}}{S_{out}}=\frac{86.8}{12}\approx7.23$
\end_inset


\end_layout

\begin_layout Standard
W trakcie porównań użyto procentowej miary mówiącej jaką częścią rozmiaru
 pliku nieskompresowanego jest rozmiar pliku skompresowanego.
\end_layout

\begin_layout Standard
\begin_inset Formula $\eta=\frac{V_{compressed}}{V_{original}}\cdot100\%=\frac{12}{86.8}\cdot100\%\approx13.8\%$
\end_inset


\end_layout

\begin_layout Standard
Powyższa kalkulacja nie bierze pod uwagę narzutu wprowadzanego przez protokoły
 sieciowe użyte w trakcie przesyłu.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
12kb/s wyszło używając scp które leci szyfrowane, można przypuszczać że
 przepustowość jest wyższa i wyrówna narzut na protokoły sieciowe 
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Do badań wybrano trzy popularne narzędzia kompresji, przedstawia je tabela
 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:kompresja_bezstratna"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Nazwa programu
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Nazwa algorytmu
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
bzip2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Transformata Burrowsa-Wheelera
\begin_inset CommandInset citation
LatexCommand cite
key "burrows-wheeler"

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lzma
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lempel–Ziv–Markov chain algorithm
\begin_inset CommandInset citation
LatexCommand cite
key "lzma-spec,salomon2004-lzma"

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
zlib
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
deflate
\begin_inset CommandInset citation
LatexCommand cite
key "salomon2004-deflate"

\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Zbadane algorytmy kompresji bezstratnej
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:kompresja_bezstratna"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
TODO: zrobic na takim samym zbiorze danych jak dla avi oddzielnie od lvm
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Kompresja plików avi
\end_layout

\begin_layout Standard
Dane wideo uzyskiwane w trakcie pomiarów służą weryfikacji analizy danych
 pomiarowych z plików lvm.
 Identyfikowana jest liczba osi pojazdu przejeżdżającego przez kadr 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Zapytać czy coś więcej
\end_layout

\end_inset

.
 Istnieje więc możliwość zastosowania kompresji stratnej pod warunkiem zachowani
a możliwości ręcznej identyfikacji wymienionych cech pojazdu.
\end_layout

\begin_layout Standard
Zgodnie z informacjami ze wstępu teoretycznego kontener AVI może zawierać
 wiele ścieżek przechowywanych w różnych formatach.
 Pliki lvm generowane przez stanowisko pomiarowe zawierają jedną ścieżkę
 wideo w formacie MJPEG.
 Format ten składuje każdą klatkę filmu jako zdjęcie w formacie JPEG.
 Sposób odczytania informacji o strukturze pliku za pomocą pakietu ffmpeg
 przedstawia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:ffmpeg_on_avi"

\end_inset

.
 Tę samą informację można odczytać również bezpośrednio z pliku.
 Jest ona częścią nagłówka strumienia (segment strh) w sekcji hdrl, zajmuje
 4 bajty za informacją o typie strumienia.
 Na rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:avi_hexdump"

\end_inset

 przedstawiony jest zrzut plik avi za pomocą programu hexdump, służącego
 do wyświetlania zawartości plików binarnych.
 Nagłówek strh zaczyna się pod adresem 0x65, identyfikator typu strumienia
 znajduje się pod adresem 0x6c i przyjmuje wartość 
\begin_inset Quotes pld
\end_inset

vids
\begin_inset Quotes prd
\end_inset

 oznaczającą strumień wideo, pod adresem 0x70 znajduje się informacja o
 sposobie kompresji - MJPG.
 Wszystkie wartości mają długość 4 bajtów.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/avi_internals.JPG
	lyxscale 70
	scale 55

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Odczyt metadanych pliku AVI za pomocą pakietu ffmpeg
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:ffmpeg_on_avi"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/avi_hexdump.JPG
	lyxscale 50
	scale 56

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Odczyt metadanych bezpośrednio z pliku avi
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:avi_hexdump"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ponadto pakiet ffmpeg informuje, że powyższy plik zawiera tylko jedną ścieżkę.
\end_layout

\begin_layout Standard
Do testów sprawności kompresji wybrano 4 algorytmy, 3 wymienione w tabeli
 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:kompresja_bezstratna"

\end_inset

 oraz standardu H.264.
 Do testu wykorzystano 1698 plików dostępnych na stacji roboczej w Gardawicach.
 W przypadku enkoderów bezstratnych wykorzystano implementacje dostępne
 w bibliotekach standardowych języka python, pakiety lzma, bzip2 oraz zlib.
 Standard H.264 został użyty za pomocą kodeka x264 dostępnego jako część
 pakietu ffmpeg.
 W przypadku pakietów bezstratnych użyto standardowych poziomów kompresji.
 Służą one manipulowaniu czasem kompresji kosztem wielkości pliku wynikowego.
 Przedstawia je tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:presety_kompresji"

\end_inset

.
\begin_inset Note Note
status open

\begin_layout Plain Layout
przenieś to do rozpoczęcia podrozdziału
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Algorytm
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Poziom kompresji
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
bzip2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
9
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lzma
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
zlib
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Poziomy kompresji algorytmów bezstratnych
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:presety_kompresji"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Kodek x264 wywoływany był przy pomocy następującej komendy
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

ffmpeg -i <nazwa_pliku> -preset slow -crf 32 -c:v libx264 <plik_wyjsciowy>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Do analizy wykorzystano dane pomiarowe z dnia 06.10.2017.
 Skrypt przeprowadzający testy dostępny jest w źródłach pracy, ścieżka:
 implementacja/compression_analysis/measure_compression.py.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/avi_compression.jpeg
	lyxscale 60
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wyniki testów algorytmów kompresji w formie graficznej
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:box_plot_kompresja_avi"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Wyniki eksperymentu w formie wykresów pudełkowych przedstawia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:box_plot_kompresja_avi"

\end_inset

.
 Wielkością mierzoną na osi Y jest procentowa wielkość pliku skompresowanego
 względem oryginalnego, pozwala to porównywać sprawność algorytmów niezależnie
 od wielkości pliku wejściowego.
 Pozioma zielona linia oznacza medianę.
 Niebieski prostokąt ograniczony jest z dołu i góry przez odpowiednio pierwszy
 i trzeci kwartyl (Q1 oraz Q3).
 Dwie pozostałe poziome linie znajdują się w odległości danej wzorem 1.5*IQR,
 gdzie IQR=Q3-Q1 od odpowiednich brzegów prostokąta.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lzma
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
bzip2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
zlib
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
x264
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ilość pomiarów
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6103
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Średnia
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
65.57
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
66.57
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
78.30
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.97
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Odchylenie standardowe
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6.83
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5.28
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.93
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.39
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Wartość minimalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10.95
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
11.45
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
11.14
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.98
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Q1 (25%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
59.61
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
62.81
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
76.98
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.88
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Q2 (50%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
65.14
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
66.36
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
78.63
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.30
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Q3 (75%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
71.28
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
70.18
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
80.09
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4.10
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Wartość maksymalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
86.72
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
88.37
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
88.40
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
7.64
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wynik testów algorytmów kompresji w formie tabelarycznej 
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:kompresja_avi_cyfry"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Dane liczbowe zawarte w tabeli 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:kompresja_avi_cyfry"

\end_inset

 ponownie operują na sprawności.
 Zarówno z wykresu jak i danych tabelarycznych można odczytać istotną przewagę
 kodeka x264 nad pozostałymi.
 Przyczyn takiego zjawiska należy upatrywać w technikach zastosowanych w
 tym standardzie kompresji które dopasowane są do badanego przypadku.
 Zastosowanie makrobloków na statycznej scenie daje bardzo dobre rezultaty.
 Dodatkowo format MJPG nie może w efektywny sposób enkodować informacji
 o statycznej scenie ponieważ reprezentacja każdej klatki filmu musi przechowywa
ć tą informację.
\end_layout

\begin_layout Standard
Wybór enkodera x264 jako docelowego w projekcie rozwiązania wymaga ewaluacji
 jego parametrów.
\end_layout

\begin_layout Itemize

\series bold
crf
\series default
 (ang.
 Constant Rate Factor) - określa stosunek jakości obrazu do stopnia kompresji.
 Przyjmuje wartości z przedziału 0-51, gdzie 0 oznacza kompresję bezstratną
 a 51 najgorszą dostępną jakość.
 Precyzyjny wybór tego parametru jest zależny od akceptowalnej jakości obrazu
 i wymaganego stopnia kompresji.
 Wartość domyślna: 23.
\end_layout

\begin_layout Itemize

\series bold
preset
\series default
 - opisuje stosunek prędkości kodowania do stopnia kompresji.
 Określany angielskimi słowami ('ultrafast', ..., 'medium', ..., 'veryslow').
 Wartość domyślna 'medium'
\end_layout

\begin_layout Standard
Pliki avi używane są jako dane walidacyjne dla obliczeń i analizy plików
 z danymi sygnałowymi, stąd wartość crf wymaga doboru ręcznego na podstawie
 oględzin filmu wynikowego.
 Przykład kompresji ilustrują rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:oryginalny_snapshot"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:snapshot_crf23"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:snapshot_crf32"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/snapshot_avi.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Oryginalna klatka z filmu
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:oryginalny_snapshot"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/snapshot_crf23.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Klatka po enkodowaniu, crf 23
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:snapshot_crf23"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/snapshot_crf32.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Klatka po enkodowaniu, crf 32
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:snapshot_crf32"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Zmiana parametru crf wprowadza zniekształcenia do obrazu jednak istotna
 informacja - ilość osi - jest cały czas czytelna.
 Promotor zaaprobował ustawienie wartości parametru crf na 32.
 Zniekształcenia przy wyższych wartościach utrudniają odczyt ilości osi.
 W projekcie aplikacji można uwzględnić konfigurowalną wartość tego parametru.
\end_layout

\begin_layout Standard
Do oszacowania sprawności poszczególnych ustawień ponownie zastosowano pomiary
 z 06.10.2017.
 Zgrubne porównanie wyników na podstawie mediany sprawności oraz czasu przedstaw
ia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:presety_ffmpeg_porownanie"

\end_inset

.
 Na podstawie wykresu front Pareto dla badanego zagadnienia stanowią presety
 'superfast' ze względu na czas kompresji oraz 'veryfast' ze względu na
 sprawność.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/czas_sprawnosc_mediana.jpeg
	lyxscale 70
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wykres punktowy czasu do sprawności kompresji dla presetów programu ffmpeg
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:presety_ffmpeg_porownanie"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
W badanym przypadku zastosowano również metodę analizy danych za pomocą
 wykresów pudełkowych.
 Wykresy dla sprawności i czasu kompresji przedstawiają rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:presety_ffmpeg_kompresja"

\end_inset

 i 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:presety_ffmpeg_czas"

\end_inset

.
 Dane liczbowe zawierają odpowiednio tabele 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:preset_ffmpeg_kompresja"

\end_inset

 i 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:preset_ffmpeg_czas"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/stopien_kompresji_presety.jpeg
	lyxscale 70
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wykres pudełkowy sprawności kompresji dla presetów programu ffmpeg
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:presety_ffmpeg_kompresja"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="10">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
ultrafast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
superfast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
veryfast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
faster
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
fast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
medium
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
slow
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
slower
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
veryslow
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Ilość pomiarów
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Średnia
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
7.89
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6.45
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.88
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
3.38
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
3.81
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
3.79
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.97
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.89
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.33
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Odchylenie standardowe
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
5.66
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6.19
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.85
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.17
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.64
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.66
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.39
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.40
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.82
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Wartość minimalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.24
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.06
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.73
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.81
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.89
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.96
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.98
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.02
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.88
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Q1 (25%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
4.05
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.35
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.52
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.79
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.89
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.90
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.88
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.81
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.67
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Q2 (50%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
5.09
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.94
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.90
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.25
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.36
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.33
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.30
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.20
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.00
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Q3 (75%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
8.96
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
7.79
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
4.06
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
4.66
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
5.20
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
5.03
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
4.10
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
3.99
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
3.03
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Wartość maksymalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
24.79
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
21.49
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
9.19
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
10.74
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
11.54
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
11.55
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
7.64
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
7.52
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
5.59
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wartości liczbowe pomiarów skuteczności kompresji dla presetów programu
 ffmpeg
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:preset_ffmpeg_kompresja"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Odrzucono presety 'ultrafast' oraz 'superfast', pomimo najniższego czasu
 kompresji ich sprawność zdecydowanie odbiega od pozostałych oraz cechuje
 się niską stabilnością.
 Ustawienia 'faster', 'fast' oraz 'medium' prezentują mniejszą sprawność
 niż 'veryfast' przy wyższym oczekiwanym czasie kompresji.
\end_layout

\begin_layout Standard
Kryterium czasu w przypadku pracy posiada zdecydowanie niższy priorytet
 niż sprawność ze względu na przepustowość łącza.
 Sumaryczny czas kompresji plików avi i lvm nie powinien jednak przekraczać
 średniego czasu pomiędzy pojawieniem się pomiarów.
 Jeśli warunek ten nie zostanie spełniony należałoby zrównoleglić kompresję
 składowych pomiaru.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/czas_kompresji_presety.jpeg
	lyxscale 70
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wykres pudełkowy czasu kompresji dla presetów programu ffmpeg
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:presety_ffmpeg_czas"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="10">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
ultrafast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
superfast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
veryfast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
faster
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
fast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
medium
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
slow
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
slower
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
veryslow
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Ilość pomiarów
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
6103
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Średnia
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.52
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.46
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.52
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.60
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.69
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.76
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.88
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.05
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.45
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Odchylenie standardowe
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.20
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.16
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.17
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.18
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.21
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.21
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.20
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.21
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.28
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Wartość minimalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.12
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.14
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.14
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.16
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.21
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.20
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.19
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.29
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.34
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Q1 (25%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.38
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.36
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.40
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.47
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.54
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.60
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.74
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.90
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.26
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Q2 (50%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.47
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.42
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.48
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.56
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.65
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.72
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.84
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.02
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.41
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Q3 (75%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.61
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.54
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.61
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.70
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.81
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.88
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
0.99
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.16
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.60
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
Wartość maksymalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.85
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.61
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.62
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.73
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.10
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
1.96
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
2.77
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
3.01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size scriptsize
\lang english
3.15
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wartości liczbowe pomiarów czasu kompresji dla presetów programu ffmpeg
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:preset_ffmpeg_czas"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Na podstawie zebranych danych oraz informacji o wymaganiach czasowych wybrano
 preset 'veryslow'.
 Zysk z krótkiego czasu kompresji jest tracony czekając na transport danych
 po sieci, mniejsza waga plików skompresowanych odciąża zaś łącze.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
dodać tu co ile sekund wchodzi plik?
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Kompresja plików lvm
\end_layout

\begin_layout Standard
Plik lvm posiadają format CSV (ang.
 comma separated value).
 Format ten służy przechowywaniu danych tabelarycznych w postaci tekstowej.
 Plik dzielony jest na wiersze za pomocą znaków nowej lini, w pojedynczej
 linii kolumny rozdzielane są separatorem.
 Jest to pojedynczy, zdefiniowany przez użytkownika znak który w podstawowym
 schemacie nie występuje w komórkach danych.
 Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:lvm_internal"

\end_inset

 prezentuje zawartość przykładowego pliku z pomiarami.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/lvm_internal.JPG
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Przykładowa zawartość pliku lvm
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:lvm_internal"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Pliki składa się z 7 kolumn zawierających wartości zmiennoprzecinkowe ze
 znakiem.
 Pierwsza kolumna zawiera indeksy, gdzie numer próbki zaczyna się na czwartym
 miejscu po przecinku.
 Pozostałe sześć kolumn zawiera wartości sygnałów w każdym z kanałów pomiarowych
 w danym momencie czasu.
 Pomiary nie zawierają wiersza nagłówkowego.
 Przebieg sygnałów z przykładowego pliku obrazuje rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:przykladowe_pomiary"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/przykladowy_przebieg_sygnalow.jpeg
	lyxscale 40
	scale 23

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Przebiegi sygnałów z pojedynczego pliku lvm
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "rys:przykladowe_pomiary"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Prócz zastosowania kompresji wielkość pliku lvm można zmniejszyć usuwając
 kolumnę indeksującą.
 Tę samą informację zapewnia struktura pliku csv.
\end_layout

\begin_layout Standard
Testy schematów kompresji przeprowadzono na pomiarach z 06.10.2017 analogicznie
 jak w przypadku plików avi.
 Ponownie zestaw enkoderów bezstratnych rozszerzono o schemat stratny.
 Do testów dołączono algorytm kompresji sygnałowej oparty o zastosowanie
 falek którego prototyp powstał w Katedrze Metrologii wydziału EAIiIB AGH.
 Implementacja została dołączona do źródeł pracy, dostępna w ścieżce 
\begin_inset Note Note
status open

\begin_layout Plain Layout
tutaj bedzie path do tego
\end_layout

\end_inset

.
 Ze względu na brak oficjalnej nazwy algorytm w toku pracy określany jest
 angielskim słowem wavelets (pol.
 falki).
\end_layout

\begin_layout Standard
Implementacje enkoderów oraz ich ustawienia analogicznie jak w przypadku
 danych wideo.
 Kompresje prowadzono na oryginalnych plikach, posiadających kolumnę indeksów.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/lvm_compression.jpeg
	lyxscale 75
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wyniki testów kompresji plików lvm w formie wykresu pudełkowego
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:box_plot_kompresja_lvm"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lzma
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
bzip2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
zlib
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
wavelets
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ilość pomiarów
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
6103
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
6103
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Średnia
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
21.62
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
19.73
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
28.96
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.13
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Odchylenie standardowe
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.55
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
1.02
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.89
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.01
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Wartość minimalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
19.37
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
16.10
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
26.28
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.09
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Q1 (25%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
21.26
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
19.14
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
28.35
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.12
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Q2 (50%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
21.57
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
19.54
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
28.82
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.13
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Q3 (75%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
21.88
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
20.02
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
29.37
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.14
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Wartość maksymalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
25.17
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
28.69
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
35.13
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
0.37
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wynik testów kompresji plików lvm w ujęciu statystycznym
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:box_plot_kompresja_lvm"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Wyniki testów przedstawiają rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:box_plot_kompresja_lvm"

\end_inset

 oraz tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:box_plot_kompresja_lvm"

\end_inset

.
 Kompresja falkowa ma ponad 20 razy lepszą sprawność niż pozostałe metody.
 Zastosowanie tego formatu wymaga ewaluacji danych zdekodowanych pod kątem
 utraty informacji.
\end_layout

\begin_layout Standard
Za miarę błędu dekompresji przyjęto błąd średniokwadratowy.
\end_layout

\begin_layout Standard
\begin_inset Formula $mse=\frac{1}{n}\sum_{i=0}^{n-1}\left(x_{i}-\dot{x_{i}}\right)^{2}$
\end_inset

, gdzie
\end_layout

\begin_layout Standard
\begin_inset Formula $n$
\end_inset

 - liczba próbek
\end_layout

\begin_layout Standard
\begin_inset Formula $x_{i}$
\end_inset

- i-ta próbka oryginalnego sygnału
\end_layout

\begin_layout Standard
\begin_inset Formula $\dot{x_{i}}$
\end_inset

- i-ta próbka zdekompresowanego sygnału
\end_layout

\begin_layout Standard
Do analizy ponownie wykorzystano dane z 06.10.2017.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/mse_wavelets.jpeg
	lyxscale 70
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wykres pudełkowy błędu średnio-kwadratowego komresji algorytmem falkowym
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:wavelet_mse"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="7">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Kanał 1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Kanał 2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Kanał 3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Kanał 4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Kanał 5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Kanał 6
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Ilość pomiarów
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
5940
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
5940
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
5940
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
5940
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
5940
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
5940
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Średnia
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
284.54
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
250.57
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
160.56
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
484.06
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
91.98
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
208.94
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Odchylenie standardowe
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
3292.13
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
3155.06
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
2645.10
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
3953.51
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
1673.07
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
3054.47
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Wartość minimalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.000341
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.000247
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.000536
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.000503
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.002096
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.000757
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Q1 (25%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.001319
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.000708
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.001485
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.001304
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.002643
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.001596
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Q2 (50%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.001917
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.001166
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.001984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.001756
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.003014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.002104
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Q3 (75%)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.002505
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.001804
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.002314
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.002554
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.003510
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
0.002927
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
Wartość maksymalna
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
70019
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
91181
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
93338
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
73839
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
48370
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size footnotesize
\lang english
151779
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Dane statystyczne błędu średnio-kwadratowego kompresji algorytmem falkowym
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:wavelet_mse"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Wyniki eksperymentu przedstawiają rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_mse"

\end_inset

 oraz tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:wavelet_mse"

\end_inset

.
 W analizie wyróżniono kanały pomiarowe ze względu na inny oczekiwany przebieg
 sygnału.
 Dane pokazują bardzo wysokie wartości odchylenia standardowego w stosunku
 do średniej oraz wartości maksymalne błędu o dwa rzędy wielkości wyższe
 niż wartość średnia.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/zaburzenia_falek_duze.jpeg
	lyxscale 70
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Przebieg oryginalny oraz zdekompresowany sygnału o najwyższym błędzie
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:wavelet_little_signal"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Wykres 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_little_signal"

\end_inset

przedstawia przebieg oryginalnego oraz zdekompresowanego sygnału.
 Wykresu sugeruje, że sygnał oryginalny posiada wartość równą zero.
 Widoczne są trzy istotne zaburzenia.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/zaburzenia_falek_duze_zblizenie.jpeg
	lyxscale 70
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wykres 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_little_signal"

\end_inset

przeskalowany do zakresu -10,10 na osi Y
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:wavelet_duze_zaburzenia_przyblizony"

\end_inset


\end_layout

\end_inset

Przeskalowanie wykresu na osi y do wartości -10, 10 przedstawia wykres 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_duze_zaburzenia_przyblizony"

\end_inset

.
 Można na nim zaobserwować, że przebieg sygnału nie jest zerowy, w większości
 składa się z szumu o bardzo małych wartościach.
 Sygnał z kanału 5 pomiaru o małym zaburzeniu przedstawia wykres 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_poprawny_przebieg"

\end_inset

.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/wavelet_poprawny_przebieg.jpeg
	lyxscale 70
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Akceptowalny przebieg dekompresji algorytmem falkowym
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:wavelet_poprawny_przebieg"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Dane z wykresów 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_little_signal"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_duze_zaburzenia_przyblizony"

\end_inset

 oraz 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_poprawny_przebieg"

\end_inset

 pokazują, że algorytm falkowy w skrajnych wypadkach produkuje wysoką utratę
 informacji względem oryginału.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/mse_wavelets_closeup.jpeg
	lyxscale 70
	scale 24

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wykres 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_mse"

\end_inset

 z pominięciem obserwacji odstających
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:wavelet_mse_no_outliers"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Jak pokazuje 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:wavelet_mse_no_outliers"

\end_inset

, algorytm falkowy cechuje się dużym rozchwianiem wyników.
 Zastosowanie algorytmu o niskiej stabilności do kompresji danych pomiarowych
 może znacznie uszczuplić ich przydatność w dalszych badaniach.
\end_layout

\begin_layout Subsection
Wynikowy schemat kompresji
\end_layout

\begin_layout Standard
Zgodnie z danymi z początku rozdziału maksymalna akceptowalna wielkość danych
 skompresowanych 13.8% wielkości wejściowej.
\end_layout

\begin_layout Standard
Sumaryczna waga plików przed kompresją wynosi 
\end_layout

\begin_layout Standard
\begin_inset Formula $V_{original}=V_{avi}+V_{lvm}=10055751.505\,Kb$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $\dot{V}_{typ}$
\end_inset

- sumaryczna waga plików danego typu po kompresji wybraną metodą
\end_layout

\begin_layout Standard
Procent kompresji dla danej pary metod kompresji wyliczony został ze wzoru
\end_layout

\begin_layout Standard
\begin_inset Formula $\eta=\frac{\dot{V}_{avi}+\dot{V}_{lvm}}{V_{original}}\cdot100\%$
\end_inset


\end_layout

\begin_layout Standard
Obliczenia sprawności metod kompresji otrzymano na podstawie pomiarów z
 06.10.2017.
 W przypadku x264 zastosowany został preset 'veryslow', pozostałe metody
 jak w poprzednich podrozdziałach.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lzma
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
bz2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
zlib
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
x264
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lzma
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
40.32
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
41.08
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
46.56
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
13.86
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
bz2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
39.26
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
40.02
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
45.49
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
12.80
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
zlib
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
44.47
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
45.22
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
50.70
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
18.00
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Macierz sprawności kompresji w zależności od metody
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:sprawnosc_metod_kompresji"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Wyniki obliczeń przedstawia tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:sprawnosc_metod_kompresji"

\end_inset

.
 Wiersze reprezentują metodę kompresji plików lvm, kolumny plików avi.
 Na podstawie tabeli można stwierdzić że wymaganą sprawność reprezentuje
 tylko para (bz2, x264).
 W doborze metody kompresji plików lvm wzięto pod uwagę tylko algorytmy
 bezstratne, system transportowy nie powinien wprowadzać zakłóceń w danych
 pomiarowych.
\end_layout

\begin_layout Section
Wymagania projektowe
\end_layout

\begin_layout Standard
Analiza stanowiska pomiarowego prowadzi do następujących wniosków.
\end_layout

\begin_layout Itemize
Ilość danych generowanych przez stanowisko pomiarowe nie jest stała w czasie
\end_layout

\begin_layout Itemize
Częstotliwość pojawiania się nowych plików jest zmienna
\end_layout

\begin_layout Itemize
Dane składowane są w podkatalogach konkretnego katalogu na dysku
\end_layout

\begin_layout Itemize
Przepustowość łącza nie pozwala na bezpośredni przesył danych, wymagana
 jest kompresja
\end_layout

\begin_layout Itemize
Aplikacja zapisująca dane na dysku nie posiada mechanizmu pozwalającego
 na rozgłoszenie 
\begin_inset Quotes pld
\end_inset

zdarzenia
\begin_inset Quotes prd
\end_inset

 utworzenia nowego pliku
\end_layout

\begin_layout Itemize
Wielkość plików avi posiada zdecydowanie większą zmienność niż lvm.
\end_layout

\begin_layout Itemize
Nazwy plików posiadają regularną strukturę, pozwala to na ich porządkowanie
 w czasie bez użycia metadanych pliku
\end_layout

\begin_layout Standard
Wymagania projektowe:
\end_layout

\begin_layout Itemize
Dane dostarczone na serwer uczelni mają zachować informacje kluczowe do
 dalszej obróbki, w przypadku plików sygnałowych/video nie wyklucza to kompresji
 stratnej
\end_layout

\begin_layout Itemize
System ma automatycznie nawiązywać ponowne połączenie w przypadku problemów
 z siecią, przewidywana jest duża niestabilność połączenia sieciowego.
\end_layout

\begin_layout Itemize
W przypadku utraty połączenia sieciowego aplikacja ma być w stanie przechować
 informacje o generowanych plikach i ponowić wysyłanie po odzyskaniu połączenia
\end_layout

\begin_layout Itemize
Parametry działania mają mieć formę konfigurowalną w postaci przełączników
 przy starcie aplikacji bądź plików konfiguracyjnych
\end_layout

\begin_layout Standard
Wymagane parametry konfigurowalne:
\end_layout

\begin_layout Itemize
Adres klienta
\end_layout

\begin_layout Itemize
Adres serwera
\end_layout

\begin_layout Itemize
Ścieżka do folderu w którym generowane są pomiary
\end_layout

\begin_layout Itemize
Ścieżka do folderu na przesłane pomiary
\end_layout

\begin_layout Itemize
Mapowanie pomiędzy typami plików a schematami kompresji
\end_layout

\begin_layout Itemize
Lista typów plików do przesłania
\end_layout

\begin_layout Chapter
Projekt systemu
\begin_inset CommandInset label
LatexCommand label
name "chap:Projekt-systemu"

\end_inset


\end_layout

\begin_layout Standard
Podsumowując informacje z rozdziału 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:opis_problemu"

\end_inset

 zadaniem aplikacji jest przesłanie danych z komputera będącego częścią
 stanowiska pomiarowego do maszyny służącej składowaniu danych na terenie
 uczelni.
 Podstawowym zadaniem systemu jest:
\end_layout

\begin_layout Enumerate
Pobranie danych ze stanowiska pomiarowego
\end_layout

\begin_layout Enumerate
Bezstratny przesył sieciowy
\end_layout

\begin_layout Enumerate
Zapisanie danych na serwerze
\end_layout

\begin_layout Standard
Ograniczenia projektu:
\end_layout

\begin_layout Itemize
Aplikacja zapisująca dane z kart pomiarowych do dysku nie może być modyfikowana
\end_layout

\begin_layout Itemize
Przepustowość łącza jest mniejsza niż strumień danych generowanych przez
 stanowisko pomiarowe
\end_layout

\begin_layout Itemize
Połączenie pomiędzy stanowiskiem pomiarowym a uczelnią może zostać zerwane
\end_layout

\begin_layout Itemize
Instalacja dodatkowych programów/bibliotek na maszynie stanowiska pomiarowego
 jest trudna ze względu na problemy z połączeniem i przepustowością
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/podstawowy_schemat_serwisow.jpg
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat rozwiązania
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:schemat_rozwiazania"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:schemat_rozwiazania"

\end_inset

 przedstawia najistotniejsze elementy projektu.
 Elementy podzielone zostały na dwie grupy oznaczające maszyny na których
 się znajdują.
 Liniami oznaczono kanały służące komunikacji bądź przesyłowi danych.
 Ze względu na istotną rolę w projekcie diagram zawiera również dyski twarde
 obu maszyn.
 W pracy zaprojektowano komponenty Sender, Receiver oraz kanały komunikacyjne
 2, 4.
 Linie 3 i 5 oznaczają interakcje z dyskiem i stanowią cześć komunikacji
 kanałów odpowiednio 2 i 4.
\end_layout

\begin_layout Standard
Komponent Labview jest elementem zewnętrznym z perspektywy pracy.
 Sender reaguje na zdarzenie zapisania pomiaru na dysk generowane przez
 ten komponent ale nie wpływa na jego stan.
\end_layout

\begin_layout Section
Identyfikowanie nowych pomiarów
\begin_inset CommandInset label
LatexCommand label
name "sec:Odbiór-danych"

\end_inset


\end_layout

\begin_layout Standard
Kluczowym z perspektywy pracy jest zidentyfikowanie pojawienia się nowych
 pomiarów.
 Pierwotnie Labview po wykonaniu każdego pomiaru zapisywało parę plików
 (lvm, avi) na dysku i kończyło działanie.
 Identyfikację nowych pomiarów można przeprowadzić na szereg sposobów:
\end_layout

\begin_layout Enumerate
Sender monitoruje stan dysku samodzielnie identyfikując nowe pliki
\end_layout

\begin_layout Enumerate
Sender subskrybuje zdarzenia systemowe mówiące o pojawieniu się nowych plików
\end_layout

\begin_layout Enumerate
Serwis Labview za pomocą wybranego kanału udostępnia informację o pojawieniu
 się nowego pliku
\end_layout

\begin_layout Standard
Propozycja pierwsza zakłada periodyczne sprawdzanie stanu dysku i porównywanie
 z poprzednim odczytem a następnie identyfikowanie nowych plików na podstawie
 różnicy tych stanów.
 Wprowadza to do projektowanego systemu opóźnienie w wykryciu plików.
 W pesymistycznym przypadku jest ono równe interwałowi pomiędzy kolejnymi
 sprawdzeniami.
 Ponadto systemy operacyjne dostarczają wywołania systemowe do raportowania
 tego typu zdarzeń bez opóźnień.
\end_layout

\begin_layout Standard
Na ich wykorzystaniu opiera się propozycja druga.
 W systemach z rodziny Linux odpowiada za to subsystem inotify 
\begin_inset CommandInset citation
LatexCommand cite
key "inotify"

\end_inset

, Windows posiada zaś funckję systemową ReadDirectoryChangesW 
\begin_inset CommandInset citation
LatexCommand cite
key "wininotify"

\end_inset

.
 Istotną wadą tego podejścia jest wymóg zastosowania języka C w którym napisane
 są te wywołania bądź języka C++ który posiada możliwość wywoływania funkcji
 języka C.
 Można również skorzystać z bibliotek FFI (ang.
 foreign function interface) które pozwalają na wywołanie funkcji języka
 C w wybranym języku.
 Przykładem takiej biblioteki jest ctypes dostępne w Pythonie 
\begin_inset CommandInset citation
LatexCommand cite
key "python-ctypes"

\end_inset

.
 Propozycja ta została odrzucona ponieważ prowadzi ona do utraty przenośności
 kodu.
\end_layout

\begin_layout Standard
Podejście piąte wymaga utworzenia dodatkowego elementu raportującego w Labview.
 Zmiana taka nie wpływa na cykl działania aplikacji, wymaga jednak modyfikacji
 istniejącego rozwiązania.
 Została ona zaakceptowana i wprowadzona przez Promotora.
\end_layout

\begin_layout Standard
System pomiarowy nasłuchuje na porcie 6341 protokołu TCP, w przypadku nawiązania
 połączenia wysyła on za jego pomocą ścieżki do pomiarów rozdzielone znakiem
 nowej linii po ich zapisaniu do dysku.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/sciezki_z_labview.JPG

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Ścieżki nadawane przez serwis Labview
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:labview_nadaje"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:labview_nadaje"

\end_inset

 przedstawia pliki zaraportowane przez Labview odebrane za pomocą programu
 netcat.
 Z rysunku można zaobserwować, że nadawane są ścieżki relatywne, należy
 je interpretować względem katalogu bazowego pomiarów.
 Ponadto nie posiadają one rozszerzenia.
 Zadaniem odbiorcy jest uzupełnienie ścieżki o powyższe informacje.
\end_layout

\begin_layout Section
Schemat działania systemu
\begin_inset CommandInset label
LatexCommand label
name "sec:Schemat-działania-systemu"

\end_inset


\end_layout

\begin_layout Standard
Schemat przesyłu z uwzględnieniem danych z poprzedniego podrozdziału prezentuje
 rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:przeslanie_pliku"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/schemat_przeslania_pliku.jpg
	lyxscale 50
	scale 55

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat przesłania pomiaru
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:przeslanie_pliku"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Czynności wykonywane przez system 
\end_layout

\begin_layout Enumerate
Labview zapisuje pomiar na dysku
\end_layout

\begin_layout Enumerate
Labview raportuje pojawienie się pomiaru do Sendera
\end_layout

\begin_layout Enumerate
Sender konstruuje pełne ścieżki i sprawdza obecność plików na dysku
\end_layout

\begin_layout Enumerate
Sender pobiera dane i opcjonalnie kompresuje
\end_layout

\begin_layout Enumerate
Dane zostają wysłane do Receivera i opcjonalne zdekodowane (dekompresja)
\end_layout

\begin_layout Enumerate
Receiver zapisuje dane do dysku
\end_layout

\begin_layout Enumerate
Receiver raportuje poprawne zapisanie danych
\end_layout

\begin_layout Enumerate
(opcjonalnie) Sender usuwa nadane pliki z przestrzeni dyskowej
\end_layout

\begin_layout Standard
Sprawdzenie istnienia plików wymagane jest ze względu na zaburzenie wymienione
 w sekcji 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Struktura-generowanych-danych"

\end_inset

.
 Plik avi w szczególnych przypadkach może nie zostać wygenerowany.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
W schematach działania Sendera i Receivera pominięto sekwencje nawiązywania
 połączenia, zostaną one przedstawione w sekcjach 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Architektura-serwisu-Sender"

\end_inset

 i 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Architektura-serwisu-Receiver"

\end_inset

.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Sender
\end_layout

\begin_layout Standard
Z perspektywy systemu czynność pojawienia się nowych pomiarów jest zdarzeniem
 asynchronicznym które powinno zostać obsłużone w momencie zajścia, uniemożliwia
 to zastosowania aplikacji pracującej z użyciem jednego wątku wykonania.
 Wymagane jest w tym miejscu zastosowanie współbieżności która pozwoli na
 jednoczesne nadawanie plików oraz odbieranie informacji o nowych pomiarach.
 Prowadzi to również do potrzeby zastosowania kolejki która przechowa informację
 o ich istnieniu pomiędzy pojawieniem się na dysku a nadaniem.
\end_layout

\begin_layout Standard
Prowadzi to do schematu przedstawionego na rys 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:sender_arch-1"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/schemat_klienta.jpg
	lyxscale 70
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat serwisu Sender
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:sender_arch-1"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Za odbieranie informacji o nowych plikach odpowiedzialny jest wątek ReceiverThre
ad, za nadawanie danych wątek SenderThread, informacje przechowywane są
 w kolejce StageQueue.
 Częścią aplikacji są również kolejka synchronizacyjna SyncQueue oraz wątek
 odpowiadający za synchronizację SynchronizationThread, ich rola została
 opsiana w sekcji 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Synchronizacja"

\end_inset

.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/receiver_thread_flow.jpg
	lyxscale 70
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat pracy wątku ReceiverThread
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:receiver_thread"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Schemat pracy wątku ReceiverThread przedstawia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:receiver_thread"

\end_inset

.
 Wątek zostaje uśpiony do czasu pojawienia się danych w buforze połączenia,
 w przypadku gdy dane nie zawierają pełnej ścieżki wątek czeka na więcej
 danych po czym konstruuje pełną ścieżkę, sprawdza obecność plików na dysku
 i dodaje plik do kolejki plików do wysłania.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/sender_thread_flow.jpg
	lyxscale 80
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat pracy wątku SenderThread
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:sender_thread"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Schemt pracy wątku SenderThread przedstawia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:sender_thread"

\end_inset

.
 Wątek może zostać uśpiony w przypadku gdy kolejka jest pusta, zostanie
 wybudzony w momencie pojawienia się w niej danych do przetworzenia.
 Po pobraniu ścieżki sprawdzane jest rozszerzenie pliku, na tej podstawie
 dobierany jest schemat kompresji bądź jego brak.
 Na schemacie uproszczony został schemat wysyłania pliku bez kompresji,
 w pracy podobnie jak w przypadku kompresowanym odczytuje on z dysku i nadaje
 plik za pomocą ustalonej wielkości fragmentów.
 Jest to zabezpieczenie przed nadmiernym wykorzystaniem pamięci ram przez
 aplikację w przypadku przetwarzania dużych plików.
\end_layout

\begin_layout Subsection
Receiver
\end_layout

\begin_layout Standard
Serwis Receiver zrealizowany został jednowątkowo, oczekiwane jest od niego
 wysłanie potwierdzenia po zapisaniu każdego pliku na dysku.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/sender_component_scheme.jpg
	lyxscale 80
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat pracy komponentu Receiver 
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:receiver_component"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:receiver_component"

\end_inset

 przedstawia schemat pracy komponentu Receiver.
 W sposób abstrakcyjny oznaczono czynności dotyczące sposobu odebrania pliku,
 zostaną one omówione w sekcji 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:protokół_przesyłu"

\end_inset

.
 Na diagramie można zauważyć, że dane odbierane nie są buforowane po stronie
 użytkownika, w przypadku szybkich łączy może to prowadzić do zapełnienia
 bufora odbiorczego połączenia po stronie systemu operacyjnego.
 W analizowanym przypadku takie ryzyko nie istnieje.
 Prędkość zapisu do dysku przewyższa prędkość transmisji sieciowej.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
niby da się to sprawdzić winsatem ale musiałbym mieć admina w gardawicach
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ważną z perspektywy pracy jest strategia zapisywania danych na serwerze
 docelowym, projekt zakłada odtworzenie struktury katalogów z pomiarami
 obecnej w Gardawicach na serwerze uczelnianym.
 Kluczowym w tym wypadku jest wybór katalogu bazowego w konfiguracji serwisu
 Receiver.
 W przypadku skonfigurowania katalogu bazowego na
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

/var/server_storage/
\end_layout

\end_inset


\end_layout

\begin_layout Standard
przesłany plik o ścieżce
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

R2018_03_11/M180311_182125.lvm
\end_layout

\end_inset


\end_layout

\begin_layout Standard
zostanie zapisany w
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

/var/server_storage/R2018_03_11/M180311_182125.lvm
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Odstępem od tej reguły jest przypadek gdy dekompresja się nie powiedzie,
 w takim przypadku pomiar zostanie zapisany w
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

/var/server_storage/failed_decompression/R2018_03_11/M180311_182125.lvm
\end_layout

\end_inset


\end_layout

\begin_layout Section
Protokół przesyłu
\begin_inset CommandInset label
LatexCommand label
name "chap:protokół_przesyłu"

\end_inset


\end_layout

\begin_layout Standard
Głównym wymaganiem względem przesyłu plików jest jego bezstratność i uporządkowa
nie.
 Strumień bajtów nadawany przez Sendera musi być identyczny ze strumieniem
 odczytanym przez Receivera.
 W przypadku pracy powyższe cechy gwarantuje użycie protokołu TCP w warstwie
 transportowej.
\end_layout

\begin_layout Standard
Zgodnie z modelem TCP/IP protokół ten dostarcza jedynie pomost pomiędzy
 procesami na dwóch różnych maszynach, zadaniem użytkownika jest dobranie
 bądź skonstruowanie protokołu warstwy aplikacji który zrealizuje zakładaną
 czynność, w przypadku pracy przesył plików.
\end_layout

\begin_layout Standard
Konstrukcja własnego protokołu posiada wymóg stworzenia reguł transformacji
 danych z formy dyskretnej - pojedynczego pliku - na ciągłą, strumień bajtów
 która będzie zdatna do jednoznacznego odczytu przez odbiorcę.
 W szczególności wymaga to wykrycia w strumieniu granic pomiędzy kolejnymi
 plikami.
 Działanie takie jest proste w wypadku danych o stałej długości, odbiorca
 każdorazowo odczytuje ze strumienia fragment danych o zadanej długości
 i przetwarza zgodnie z ustalonymi regułami.
 W przypadku analizowanym w pracy nie można założyć stałej długości pliku.
 Z tego powodu wymagane jest zastosowanie reprezentacji która jednoznacznie
 wyznaczy koniec pliku.
\end_layout

\begin_layout Standard
Podstawowym podejściem w przypadku przetwarzania strumieniowego jest używanie
 sekwencji terminującej, ustalonej z góry sekwencji bajtów która rozdziela
 pakiety danych (pliki), podejście takie zastosowano w przypadku rozgłaszania
 nowych pomiarów przez serwis labview, znak nowej linii nie może być częścią
 poprawnej ścieżki więc może zostać bezpiecznie zastosowany jako separator.
 Podczas przesyłu plików binarnych nie można zastosować tego podejścia ponieważ
 istnieje prawdopodobieństwo napotkania dowolnej sekwencji w ciele przesyłanego
 pliku.
 Zamiast tego nadawana jest długość pliku w bajtach przed jego zawartością,
 tym samym dostarczana jest odbiorcy informacja gdzie zaczyna się kolejny
 plik.
 Podejście takie stosuje protokół HTTP w wersji 1.1 używając nagłówka Content-Len
gth.
\end_layout

\begin_layout Standard
Innym podejściem jest otwieranie połączenia na czas nadawania pojedynczego
 pliku, tym sposobem jego koniec sygnalizowany jest przez zamknięcie połączenia.
 Podejście takie dozwolone jest w standardzie HTTP 1.0 w przypadku braku
 nagłówka Content-Length.
\end_layout

\begin_layout Standard
W pracy aby przesłać plik wymagane są następujące informacje:
\end_layout

\begin_layout Enumerate
Ścieżka do pliku
\end_layout

\begin_layout Enumerate
Długość pliku
\end_layout

\begin_layout Enumerate
Informacje o sposobie dekompresji (jeśli stosowana)
\end_layout

\begin_layout Subsection*
HTTP
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/http_example.JPG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Przykładowa para zapytanie odpowiedź protokołu HTTP
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:http_example"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:http_example"

\end_inset

 przedstawia przykładową komunikację za pomocą prokołu HTTP.
 Kolorem czerwonym oznaczono zapytanie, kolorem niebieskim odpowiedź.
 Protokół dzieli komunikację na pary zapytanie-odpowiedź (ang.
 request - response).
 Strukturę zapytania http przedstawia poniższy listing.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

<metoda> <zasób> HTTP/<wersja>
\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

<nazwa nagłówka>: <wartość nagłówka>
\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

Content-Length: <długość danych>
\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

...
\end_layout

\begin_layout Plain Layout


\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

<dane>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Zapytanie zaczyna się linią determinującą zasób którego dotyczy zapytanie,
 metodę interakcji z zasobem i wersję protokołu za pomocą której przeprowadzana
 jest komunikacja.
 Ilość nagłówków nie jest z góry ustalona, podobnie jak kolejność, ich koniec
 oznaczany jest dwoma następującymi po sobie sekwencjami znaków 
\begin_inset Quotes pld
\end_inset


\backslash
r
\backslash
n
\begin_inset Quotes prd
\end_inset

, powrotu karetki i nowej linii.
 Pozostałą część stanowi ciało zapytania.
 W przypadku przedstawionym na rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:http_example"

\end_inset

 ciało posiada zerową długość.
 
\end_layout

\begin_layout Standard
Zasoby określane są ścieżkami względem umownego zasobu bazowego określanego
 podobnie jak katalog root w systemach Unixowych, znakiem 
\begin_inset Quotes pld
\end_inset

/
\begin_inset Quotes prd
\end_inset

.
 Metody definiują sposób interakcji z zasobem, nie mają one jednak zastosowania
 w przypadku pracy poza metodą PUT służącą stworzeniu zasobu.
\end_layout

\begin_layout Standard
Odpowiedź posiada następującą strukturę
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

HTTP/<wersja> <kod statusu> <tekst statusu>
\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

<nazwa nagłówka>: <wartość nagłówka>
\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout


\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

<dane>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Zasady konstrukcji podobne jak w przypadku zapytania, różnicę stanowi pierwsza
 linia oraz reguły dyktujące jakie nagłówki bądź sposób prezentacji danych
 zostanie zastosowany w odpowiedzi w zależności od zawartości zapytania.
\end_layout

\begin_layout Standard
Schemat ten jest łatwy do dopasowania w przypadku pracy.
 Zasób jednoznaczny ze ścieżką względną do pomiaru gdzie zasób bazowy oznacza
 katalog pomiarów.
 Pozwala to na odtworzenie struktury katalogów z Gardawic na maszynie znajdujące
j się na uczelni.
 W ciele zapytania zawartość pliku którego długość ograniczy nagłówek Content-Le
ngth.
 HTTP uwzględnia również sposób kompresji danych za pomocą nagłówka Content-Enco
ding.
\end_layout

\begin_layout Standard
Przykład tak skonstruowanego zapytania przedstawia poniższy listing
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

PUT /R2018_05_15/M180515_220003.avi HTTP/1.1
\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

Content-Length: <długość pliku>
\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

Content-Encoding: <identyfikator metody kompresji>
\end_layout

\begin_layout Plain Layout


\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

<zawartość pliku>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Proponowana odpowiedź
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

HTTP/1.1 200 OK
\backslash
r
\backslash
n
\end_layout

\begin_layout Plain Layout

Content-Length: 0
\backslash
r
\backslash
n
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Z perspektywy łącza o mocno ograniczonej przepustowości protokół HTTP posiada
 istotną wadę, w podstawowym trybie działania połączenie a więc strumień
 otwierany jest na czas pojedynczego zapytania i związanej z nim odpowiedzi
 prowadzi to do częstej wymiany sekwencji inicjalizacyjncyh oraz zamykających.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
cytowanie do tego algorytmu
\end_layout

\end_inset

 W projektowanym wypadku zamykanie połączenia nie przynosi żadnych korzyści
 a prowadzi do wymiany dodatkowych pakietów kontrolnych.
 Aby uniknąć tego problemu można zastosować nagłówek Connection: keep-alive
 bądź wersję 1.1 protokołu która z definicji wykorzystuje pojedyncze połączenie
 TCP do wysyłania wielu żądań.
\end_layout

\begin_layout Subsection*
Własna implementacja
\end_layout

\begin_layout Standard
Protokół HTTP oferuje bogaty generyczny sposób interakcji z zasobami na
 zdalnych maszynach.
 W projektowanym przypadku wymagane są jedynie ścieżka pliku, oraz jego
 wielkość.
 Przesyłanie sekwencji dodatkowych nagłówków nie przynosi istotnych korzyści
 a prowadzi do przesłania nadmiarowych danych.
\end_layout

\begin_layout Standard
Zaproponowano uproszczony protokół wykorzystujący pojedyncze połączenie
 TCP.
 Do opisu pliku wykorzystuje on trójkę uporządkowaną przedstawioną na poniższym
 schemacie.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

<ścieżka pliku>
\backslash
r
\backslash
n<długość pliku>
\backslash
r
\backslash
n<zawartość pliku>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ścieżka pliku jest skonstruowana analogicznie do raportu pliku generowanego
 przez Labview, zawiera jednak rozszerzenie (odpowiednio avi bądź lvm).
 Składa się ze znaków ASCII i jest terminowana sekwencją znaków 
\begin_inset Quotes pld
\end_inset


\backslash
r
\backslash
n
\begin_inset Quotes prd
\end_inset

.
 Znaki te zarówno na systemach Linux jak i Windows nie mogą stanowić części
 ścieżki, stąd ich zastosowanie jest dozwolone.
\end_layout

\begin_layout Standard
W analogiczny sposób zapisywana jest do strumienia długość pliku.
 Reprezentowana jest ona za pomocą znaków ASCII.
\end_layout

\begin_layout Standard
Zastosowanie pól zakończonych sekwencją terminującą zamiast stałej długości
 pozwala na arbitralnie długie ścieżki oraz wielkości plików.
 Długość pliku definiuje ile bajtów od następnej sekwencji '
\backslash
r
\backslash
n' należy traktować jako zawartość danego pliku.
\end_layout

\begin_layout Standard
Informacje o schemacie kompresji przechowywane są przez rozszerzenie będące
 częścią ścieżki, odpowiednie mapowanie rozszerzenia na schemat kompresji
 musi zostać skonfigurowane po obu stronach komunikacji.
\end_layout

\begin_layout Standard
W odpowiedzi oczekiwana jest ścieżka piku zakończona sekwencją 
\begin_inset Quotes pld
\end_inset


\backslash
r
\backslash
n
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout Standard
Sekwencję deserializacji przedstawia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:receiver_deserializacja"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/schemat_dekodowania_pliku.jpg
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Sekwencja deserializacji danych
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:receiver_deserializacja"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Synchronizacja
\begin_inset CommandInset label
LatexCommand label
name "sec:Synchronizacja"

\end_inset


\end_layout

\begin_layout Standard
Wymogiem pracy jest zagwarantowanie przesłania wszystkich plików, system
 musi być w stanie przetrwać awarię poszczególnych elementów i wznowić poprawne
 działanie bez utraty danych.
 Aby zabezpieczyć się przed tego typu sytuacją zidentyfikowano szereg możliwych
 awarii oraz scenariusze przywrócenia poprawnego działania systemu.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/file_state.jpg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Maszyna stanów pliku używana w analizie awarii
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:file_states"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
W celu ułatwienia analizy pliki zostały podzielone na trzy kategorie przedstawio
ne na diagramie stanów 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:file_states"

\end_inset

.
 Plik przyjmuje stan nowy od momentu stworzenia do momentu jego dodania
 do kolejki.
 W trakcie obecności w kolejce plik przyjmuje stan monitorowany, aplikacja
 ma informację o jego obecności na dysku, w momencie usunięcia pliku z kolejki
 po otrzymaniu potwierdzenia odebrania z Receivera plik traktowany jest
 jako zapisany.
\end_layout

\begin_layout Subsection
Awaria komponentu Sender
\end_layout

\begin_layout Standard
Awaria taka może zostać spowodowana błędem w logice samej aplikacji, awarią
 systemu operacyjnego bądź odcięciem zasilania stanowiska pomiarowego.
\end_layout

\begin_layout Standard
Pierwszą czynnością którą należy wykonać jest ponowne uruchomienie aplikacji.
 W tym celu należy dodać jej uruchamianie do skryptów rozruchowych systemu
 operacyjnego oraz ustawić zadanie monitorujące jej działanie odpowiedzialne
 za ponowny rozruch w przypadku awarii.
 Czynności te należą do administratora stanowiska pomiarowego i nie zostały
 zaimplementowane w ramach pracy.
\end_layout

\begin_layout Standard
Lista plików monitorowanych czyli zawartość kolejki do wysłania jest informacją
 która nie może zostać utracona w trakcie awarii ponieważ jej odtworzenie
 jest czynnością kosztowną.
 W przypadku stratnym wymagałoby to pobrania z serwisu Sender stanu folderu
 z pomiarami, wyliczenia różnicy względem stanu folderu z pomiarami na stanowisk
u i wpisania plików nieobecnych na dysku docelowym do kolejki.
 Operacja tak w przypadku dużej ilości plików jest obciążająca zarówno od
 strony łącza jak i czasu procesora potrzebnego na wyliczenie różnic pomiędzy
 stanami.
\end_layout

\begin_layout Standard
W pracy zdecydowano się na zastosowanie kolejki dyskowej która pozwala na
 przechowanie listy monitorowanych plików w przypadku większości awarii,
 nieobsługiwany jest przypadek błędów dysku jednak w takiej sytuacji tracone
 są również dane które nadawałyby się do wysłania.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/queue_state_basic.jpg
	lyxscale 60
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Podstawowy stan systemu
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:queue_basic_state"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Informacje opisujące stan aplikacji przedstawione są na rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:queue_basic_state"

\end_inset

.
 Pliki generowane przez stanowisko pomiarowe traktowane są jak ciągły strumień
 posiadający trzy wyróżnione sekcje.
\end_layout

\begin_layout Itemize
Najnowszy poprawnie zapisany na serwerze uczelni plik
\end_layout

\begin_layout Itemize
Pliki będące zawartością kolejki
\end_layout

\begin_layout Itemize
Pierwszy nowy plik wygenerowany przez stanowisko pomiarowe
\end_layout

\begin_layout Standard
W analizowanym przypadku zakłada się brak scenariusza w którym pomiędzy
 ostatnim zapisanym na serwerze plikiem a najstarszym w kolejce znajdują
 się inne pliki.
 Zgodnie ze schematem działania wątku SenderThread aplikacji Sender (rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:sender_thread"

\end_inset

) plik usuwany jest dopiero po otrzymaniu potwierdzenia poprawnego zapisania.
\end_layout

\begin_layout Standard
Rozsynchronizowanie może wystąpić w dwóch przypadkach:
\end_layout

\begin_layout Enumerate
Awaria następuje pomiędzy wygenerowaniem pomiarów a ich dodaniem do kolejki
\end_layout

\begin_layout Enumerate
W przypadku awarii systemu, stanowisko zaczyna generować pomiary wcześniej
 niż uruchomiony zostaje Receiver
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/queue_state_unsynced.jpg
	lyxscale 60
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Rozsynchronizowany stan systemu
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:queue_unsync_state"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Oba przypadki prowadzą do następującego stanu systemu przedstawionego na
 rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:queue_unsync_state"

\end_inset

.
 Pliki n+3 i n+4 w normalnym toku pracy zaprezentowanym w poprzednich podrozdzia
łach nie zostaną dodane do kolejki ponieważ Labview rozgłasza tylko pomiary
 wykonane od czasu nawiązania połączenia.
 Obsłużenie takiej sytuacji wymaga zastosowania dodatkowego mechanizmu który
 przeszuka dysk w poszukiwaniu brakujących danych i doda je do kolejki.
\end_layout

\begin_layout Standard
Do ograniczenia przestrzeni poszukiwania potrzebne są dwie informacje
\end_layout

\begin_layout Enumerate
Ostatni plik który zmienił stan na monitorowany
\end_layout

\begin_layout Enumerate
Pierwszy plik stworzony przez labview po powrocie do działania
\end_layout

\begin_layout Standard
Pierwszą informację można uzyskać przeszukując całą kolejkę, jednak zastosowanie
 takiego schematu może być kosztowne w przypadku dużej ilości plików w kolejce.
 Zastosowano dodatkową wartość synchronizacyjną trzymaną na dysku twardym
 i modyfikowaną po każdorazowym dodaniu pliku do kolejki.
 Algorytm synchronizacji wykorzystuje informacje o strukturze folderów opisaną
 w rozdziale analiza problemu i ma następującą postać:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

1.
 Znajdź wszystkie pliki w folderze źródłowym które zostały stworzone w przedzial
e (ostatni zapisany, pierwszy nowy), posiadają monitorowane rozszerzenia
 i nie są folderami
\end_layout

\begin_layout Plain Layout

2.
 Dodaj te pliki do kolejki monitorowanych plików
\end_layout

\begin_layout Plain Layout

3.
 Znajdź wszystkie foldery które zostały stworzone w badanym przedziale
\end_layout

\begin_layout Plain Layout

4.
 Dla każdego folderu
\end_layout

\begin_layout Plain Layout

	4.1 Znajdź wszystkie pliki w folderze które zostały stworzone w badanym
 przedziale i posiadają monitorowane rozszerzenia
\end_layout

\begin_layout Plain Layout

	4.2 Dodaj te pliki do kolejki monitorowanych plików
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Zastosowanie takiego schematu synchronizacji istotnie zmniejsza ilość plików
 do przeszukania w trakcie synchronizacji.
 Synchronizacja odbywa się współbieżnie z podstawowym działaniem programu
 w wątku SynchronizationThread.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/sync_thread_flow.jpg
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat działania wątku SynchronizationThread
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:sync_thread_flow"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:sync_thread_flow"

\end_inset

 przedstawia schemat działania wątku synchronizacyjnego.
 Wątek przez zdecydowaną większość czasu jest uśpiony na odczytaniu elementu
 z kolejki.
 Dane wpisywane są do kolejki tylko w momencie aplikacja jest uruchamiana
 bądź połączenie jest nawiązywane ponownie po błędzie.
\end_layout

\begin_layout Subsection
Zerwanie połączenia sieciowego
\end_layout

\begin_layout Standard
Sytuacja ta wymaga rozpatrzenia od strony obu komponentów, projekt aplikacji
 zakłada, że klientem w komunikacji jest Sender a serwerem Receiver.
 Analogicznie zrealizowana jest komunikacja z Labview.
 
\end_layout

\begin_layout Standard
Sekwencję komunikacji z oddzielnym komponentem z perspektywy klienta podzielono
 na dwa główne etapy
\end_layout

\begin_layout Enumerate
Negocjację połączenia - kończący się stworzeniem socketu reprezentującego
 połączenie ze stroną zdalną
\end_layout

\begin_layout Enumerate
Obsługa protokołu klienckiego - reprezentująca interakcję pomiędzy komponentami
 z użyciem danego schematu komunikacyjnego
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/maszyna_stanow_polaczenia.jpg
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Maszyna stanów nawiązywania połączenia
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:connection_state_machine"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:connection_state_machine"

\end_inset

 przedstawia maszynę stanów która służy obsłudze pierwszego etapu oraz błędów.
 Etap drugi reprezentowany jest przez stan work i ideowo posiada własną
 wewnętrzną maszynę stanów związaną z protokołem komunikacyjnym.
 W przypadku błędu aplikacja odczekuje skonfigurowany czas i próbuje ponownie
 nawiązać połączenie.
 Stan protokołu klienckiego zostaje zresetowany do początkowego.
\end_layout

\begin_layout Standard
Od serwisu sender wymagane jest zresetowanie stanu protokołu przesyłowego
 i oczekiwanie na połączenie przychodzące.
\end_layout

\begin_layout Subsection
Awaria komponentu Receiver
\end_layout

\begin_layout Standard
W proponowanej architekturze komponent ten nie jest odpowiedzialny za utrzymywan
ie stanu aplikacji stąd wymagane jest jedynie ponowne jego uruchomienie
 i rozpoczęcie nasłuchiwania na zadanym porcie.
\end_layout

\begin_layout Standard
Zarówno awaria komponentu Receiver jak i problemy z siecią mogą prowadzić
 do istotnego zwiększenia rozmiaru kolejki plików oczekujących na wysłanie,
 projekt w tym momencie nie posiada logiki pozwalającej na obsłużenie tego
 typu sytuacji.
 Wśród proponowanych rozwiązań jest usuwanie najmniej istotnych plików wg.
 zadanej miary bądź kompresja i składowanie danych w Gardawicach do czasu
 nawiązania połączenia.
 W pracy nie przeprowadzono implementacji i testów tych propozycji.
\end_layout

\begin_layout Subsection
Awaria komponentu Labview
\end_layout

\begin_layout Standard
W tym przypadku wątek ReceiverThread przechodzi do schematu nawiązywania
 połączenia zgodnego z maszyną stanów z rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:connection_state_machine"

\end_inset

.
 Nie pojawiają się nowe pliki więc wątek SenderThread w przypadku pustej
 kolejki plików do wysłania blokuje się do czasu pojawienia się nowych plików
 w kolejce.
\end_layout

\begin_layout Section
Język programowania
\begin_inset CommandInset label
LatexCommand label
name "sec:Język-programowania"

\end_inset


\end_layout

\begin_layout Standard
Kryteria wyboru języka:
\end_layout

\begin_layout Enumerate
Wieloplatformowość - kod powinien nie wymagać żadnych zmian przed uruchomieniem
 na Windowsie i Linuxie
\end_layout

\begin_layout Enumerate
Szybkie prototypowanie - najwolniejszym elementem systemu jest połączenie
 sieciowe, z tego powodu zastosowanie języków wykorzystujących procesor
 w sposób bardziej efektywny nie zmienia responsywności systemu.
 Język powinien m.in automatycznie zarządzać pamięcią
\end_layout

\begin_layout Enumerate
Bogata biblioteka standardowa - ze względu na trudności w dostępie do stanowiska
 pomiarowego doinstalowywanie nowych zależności należy ograniczyć do minimum.
 Absolutnym minimum jest biblioteka do obsługi połączeń TCP.
\end_layout

\begin_layout Standard
Języki C i C++ nie spełniają żadnego z założeń.
 Wymagają kompilacji na docelową platformę, nie posiadają warstwy abstrakcji
 do interakcji ze stosem sieciowym oraz wymagają ręcznego zarządzania pamięcią.
 Benefitem ich stosowania jest bezpośredni dostęp do aspektów systemowych
 takich jak subsystem inotify na systemach Linux.
 Do interkacji sieciowych w języku C wykorzystywane są bezpośrednio berkeley
 sockets, w języku C++ można zastosować to samo podejście bądź bibliotekę
 boost::asio.
 W przypadku programów pisanych zarówno na systemu Linux i Windows wymagane
 jest zastosowanie różnych kompilatorów oraz samodzielne wypracowanie warstw
 abstrakcji celem osiągnięcia przenośności kodu.
\end_layout

\begin_layout Standard
Z powodu powyższych problemów zastosowano język Python.
 Spełnia on założenia wymienione na początku podrozdziału.
 Prócz powyższych cech kod w tym języku jest interpretowany a nie kompilowany
 co zdejmuje z użytkownika wymóg stworzenia systemu budowania dostosowanego
 do obu docelowych platform.
 Uruchomienie kodu wymaga skopiowania źródeł na platformę docelową i uruchomieni
a interpretera z odpowiednią ścieżką.
\end_layout

\begin_layout Standard
Tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:python_biblioteki"

\end_inset

 przedstawia zestawienie funkcjonalności wymaganych przez projekt oraz ich
 dostępność w języku.
 Przez bibliotekę standardową rozumie się zestaw bibliotek które są instalowane
 razem z interpreterem języka, programem python i nie wymagają doinstalowywania.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="20page%">
<column alignment="center" valignment="top" width="0pt">
<column alignment="center" valignment="top" width="25page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zagadnienie
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Nazwa biblioteki
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Uwagi
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Monitorowanie i manipulacja stanem dysku
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
pathlib
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dostępna w bibliotece standardowej
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Obsługa połączeń sieciowych
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
socket, socketserver
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dostępne w bibliotece standardowej
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Przetwarzanie parametrów podawanych z konsoli
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
argparse
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dostępna w bibliotece standardowej
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rejestrowanie i przetwarzanie czasu
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
datetime
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dostępna w bibliotece standardowej
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Kompresja i dekompresja
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lzma, bz2, zlib
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dostępne w bibliotece standardowej
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Kolejki dyskowe
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
brak
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dostępne w postaci zewnętrznych bibliotek, nie koniecznie napisanych w pythonie
 z możliwością wywołania z tego języka
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Kompresja x264
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
brak stabilnych
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Pakiet ffmpeg wymaga uruchomienia jako oddzielny proces i przekierowania
 danych
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Uruchamianie i manipulacja procesami systemowymi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
subprocess
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dostępna w bibliotece standardowej
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Zestawienie zagadnień wymaganych w projekcie i dostępności bibliotek
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:python_biblioteki"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Analogiczny poziom abstrakcji oferuje język Ruby jednak nie został on zastosowan
y ze względu na dłuższe doświadczenie autora z językiem Python.
\end_layout

\begin_layout Section
Kolejka dyskowa
\end_layout

\begin_layout Standard
W pracy wykorzystano własną implementację kolejki dyskowej, decyzja ta została
 spowodowana trudnościami w dostarczeniu popularnych implementacji do stanowiska
 pomiarowego.
 W roli kolejki zastosowana została dyskowa baza danych SQLite oraz jej
 sterownik dostępny w języku python - SQLite3.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/persistent_queue_class_diagram.jpg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagram klas kolejki dyskowej
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:queue_class_diagram"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
W implementacji zastosowano interfejs o zdefiniowanych metodach, decyzja
 ta została podyktowana umożliwieniem zastąpienia zmiany obecnej implementacji
 standarowym rozwiązaniem takim jak Celery bądź RabbitMQ.
 Rozważano również zastosowanie bazy klucz wartość Redis, jedank oferuje
 ona zapisywanie danych do dysku co interwał, grozi to utratą plików.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top" width="35page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Metoda
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Argumenty
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Typ zwracany
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Opis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
put
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ścieżka
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dodaje element do kolejki
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
get
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ścieżka
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zwraca element z kolejki zgodnie ze strategią implementacji (FIFO, LIFO,
 etc)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
pop
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ścieżka
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Usuwa element z kolejki
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
len
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zwraca długość kolejki
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
get_all
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lista ścieżek
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zwraca wszystkie elementy z kolejki
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Opis metod interfejsu PersistentQueue
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:queue_interface_description"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:queue_interface_description"

\end_inset

 przedstawia metody wymagane przez interfejs kolejki.
 Rozdzielenie metod pop i get podyktowane zostało faktem, że aplikacja usuwa
 elementy z kolejki dopiero po pełnym przeprocesowaniu i otrzymaniu potwierdzeni
a zapisania danych przez serwis Receiver.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Dodać jak metody mapują się na zapytania?
\end_layout

\end_inset


\end_layout

\begin_layout Section
Obsługa danych strumieniowych
\end_layout

\begin_layout Standard
Na strumieniach wykonywany jest stały zestaw operacji
\end_layout

\begin_layout Itemize
Zapisz/Odczytaj token (element strumienia kończący się separatorem)
\end_layout

\begin_layout Itemize
Zapisz/Odczytaj daną ilość bajtów
\end_layout

\begin_layout Standard
Z tego powodu do aplikacji wprowadzono abstrakcje o nazwie Reader i Writer
 które odpowiedzialne są za udostępnianie tych operacji.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/stream_operations.jpg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Klasy służące do manipulacji strumieniem
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:stream_operations"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:stream_operations"

\end_inset

 przedstawia schemat interakcji klas które abstrahują strumień (socket)
 od użytkownika.
 Wprowadzenie klasy StreamProxy zostało podyktowane potrzebą wprowadzenia
 testów jednostkowych i pozwala na traktowanie pliku z danymi jako strumienia
 wejściowego.
\end_layout

\begin_layout Standard
Klasa StreamTokenWriter służy zapisywaniu danych do strumienia, w trakcie
 jej konstruowania podawany jest separator dzięki któremu interfejs write_token
 tłumaczy podaną do niego zmienną na bajty, dokleja do niej predefiniowany
 separator i wpisuje do strumienia za pomocą metody write().
 Metoda write_bytes przyjmuje ciąg bajtów i zapisuje go bezpośrednio do
 strumienia.
\end_layout

\begin_layout Standard
Schemat działania klasy StreamTokenReader jest bardziej skomplikowany, w
 przypadku odczytu tokenu wymaga buforowania danych i ponownych odczytów
 do momentu napotkania separatora w buforze, prezentuje to poniższy algorytm
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

Sprawdź czy w buforze znajduje się separator
\end_layout

\begin_layout Plain Layout

	Tak: zwróć dane do jego pozycji i usuń je z bufora razem z separatorem,
 zakończ
\end_layout

\begin_layout Plain Layout

	Nie: pobierz fragment danych, przejdź do punktu 1
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Przerób na flowchart
\end_layout

\end_inset


\end_layout

\begin_layout Section
Implementacja komponentu Sender
\begin_inset CommandInset label
LatexCommand label
name "sec:Implementacja-serwisu-Sender"

\end_inset


\end_layout

\begin_layout Standard
Kluczowymi elementami w implementacji serwisu sender jest podział obsługi
 komunikacji na etap negocjacji połączenia i faktycznego przesyłu danych.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/schemat_dziedziczenia_klient_watki.jpg
	lyxscale 70
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagram klas komponentu Sender
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:client_thread_class_diagram"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Schemat klas przedstawia diagram 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:client_thread_class_diagram"

\end_inset

.
 Do tworzenia i obsługi wątków wykorzystana jest klasa Thread z biblioteki
 threading dostępnej w języku Python.
 Wątki SenderThread i ReceiverThread dziedziczą po klasie KeepAliveWorker
 która realizuje maszynę stanów przedstawioną na rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:connection_state_machine"

\end_inset

.
 Od klas dziedziczących wymagane jest zdefiniowanie metody work() która
 zostanie uruchomiona po poprawnym nawiązaniu połączenia na zadany adres.
 Komunikacja pomiędzy wątkami realizowana jest za pomocą kolejek zgodnie
 ze schematem opisanym w sekcji 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Schemat-działania-systemu"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/schemat_rozruchu_klienta.jpg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat rozruchu aplikacji Sender
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:sender_startup"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Schemat rozruchu aplikacji przedstawia rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:sender_startup"

\end_inset

.
 Wątek główny aplikacji przyjmuje rolę nadzorcy odpowiedzialnego za uruchomienie
 poszczególnych części funkcjonalnych - wątków.
 W normalnym trybie działania aplikacja nie przewiduje zatrzymania, nastawiona
 jest na nieprzerwane przetwarzanie danych.
 Każdy z wątków posiada logikę odpowiedzialną za przechwytywanie błędów
 działania prowadzących do powrotu do normalnego trybu operacyjnego.
 Kolejność rozruchu podyktowana jest priorytetem operacji, synchronizacja
 i odbieranie pomiarów z Labview dostarczają danych na których może pracować
 wątek wysyłający, z tego powodu uruchamiane są pierwsze.
\end_layout

\begin_layout Subsection
Konfiguracja i uruchamianie
\end_layout

\begin_layout Standard
Aplikacja przyjmuje serię informacji konfiguracyjnych takich jak adresy
 komponentów Labview i Receiver, interwały w nawiązywaniu połączenia czy
 mapowania danych konfiguracyjnych.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="14" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0pt">
<column alignment="center" valignment="top" width="0pt">
<column alignment="center" valignment="top" width="10page%">
<column alignment="center" valignment="top" width="30page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Sekcja
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Opcja
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Typ
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Opis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
server
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
host
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Adres IP komponentu Receiver
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
server
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
port
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
16 bit unsigned integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Port TCP komponentu Receiver
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
server
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
retry_time
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
unsigned integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Czas pomiędzy próbami nawiązania połączenia z komponentem Receiver
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
server
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
processor
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Włącza/wyłącza możliwość kompresji
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
provider
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
host
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Adres IP komponentu Labview
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
provider
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
port
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Port TCP komponentu Labview
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
provider
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
extensions
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lista ciągów znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lista rozszerzeń plików akceptowanych przez aplikację
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
provider
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
retry_time
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
unsigned integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Czas pomiędzy próbami nawiązania połączenia z komponentem Labview
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
provider
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
separator
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Separator pomiędzy kolejnymi ścieżkami nadawanymi przez komponent Labview
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
storage_root
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Katalog bazowy pomiarów
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
stage_queue_path
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ścieżka do pliku przechowującego stan kolejki
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
cache_path
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ścieżka do pliku przechowującego ostatni nadany plik
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Compression
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mapa ciąg znaków na ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mapowanie pomiędzy rozszerzeniami plików do wysłania a używanym kompresorem
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Opcje konfiguracyjne komponentu Sender
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:sender_config_options"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:sender_config_options"

\end_inset

 przedstawia opcje konfiguracyjne komponentu Sender.
 Wyróżnione są dwie główne sekcje
\end_layout

\begin_layout Itemize
server - odpowiedzialna za interakcję z komponentem Receiver
\end_layout

\begin_layout Itemize
provider - odpowiedzialna za interakcję z komponentem Labview
\end_layout

\begin_layout Standard
Obie sekcje posiadają ustawienia dotyczące komunikacji sieciowej za pomocą
 protokołu TCP oraz interwał sterujący częstotliwością prób nawiązywania
 połączenia po błędzie.
 Aplikacja posiada konfigurowalny zestaw rozszerzeń oraz schematów kompresji.
 Konfiguracja zawiera również zestaw opcji wewnętrznych dotyczących ścieżek
 przechowywania stanu.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/client_json_config.PNG

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Przykładowa konfiguracja w formacie JSON
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:client_config_json"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:client_config_json"

\end_inset

 przedstawia pełną konfigurację aplikacji w formacie json.
 Konfiguracja zakłada odbieranie plików lvm oraz avi i składowanie ich w
 katalogu /tmp/client_storage.
 Ponadto dla powyższych typów plików skonfigurowana została kompresja zgodna
 z wnioskami z sekcji 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Kompresja"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top" width="50page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Flaga
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Opis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-h, –help
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Wypisuje dostępne opcje konfiguracyjne
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-c, –config
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ścieżka do pliku konfiguracyjnego w formacie JSON
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
–options
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Pozwala na nadpisanie konfiguracji z konsoli za pomocą wpisu w postaci 
\begin_inset Quotes pld
\end_inset

<sekcja>.<pole> <wartosc>
\begin_inset Quotes prd
\end_inset

.
 Nie wspiera wartości będących słownikami bądź listami
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
–delete_acknowledged
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Włącza tryb usuwania plików po poprawnym nadaniu
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Flagi rozruchowe aplikacji Sender
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:sender_startup_options"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:sender_startup_options"

\end_inset

 przedstawia flagi jakie można podać w trakcie uruchamiania aplikacji.
 Flagi są opcjonalne.
 W przypadku braku podanych wartości konfiguracyjnych aplikacja uruchomi
 się z wartościami domyślnymi.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/sender_startup.PNG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Logi z rozruchu komponentu
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:sender_startup_logs"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:sender_startup_logs"

\end_inset

 przedstawia log z rozruchu aplikacji z wykorzystaniem konfiguracji w pliku
 json.
 Aplikację uruchomiono lokalnie bez dostępu do zewnętrznych komponentów,
 można zaobserwować komunikaty z maszyny stanów nawiązywania połączenia
 wątków ReceiverThread i SenderThread.
\end_layout

\begin_layout Section
Implementacja komponentu Receiver
\begin_inset CommandInset label
LatexCommand label
name "sec:Implementacja-komponentu-Receive"

\end_inset


\end_layout

\begin_layout Standard
Komponent Receiver odpowiedzialny jest za odbiór i opcjonalną dekompresję.
 W architekturze klient-serwer jest on serwerem czyli oczekuje na przychodzące
 połączenia.
 Funkcjonalność ta została zrealizowana za pomocą biblioteki socketserver
 dostarczanej w standardzie języka python.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/schemat_klas_receiver.jpg
	lyxscale 70
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat klas komponentu Receiver
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:receiver_class_diagram"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:receiver_class_diagram"

\end_inset

 przedstawia schemat relacji klas komponentu Receiver.
 Ponownie widoczna jest granica pomiędzy warstwą nawiązywania połączenia
 a warstwą procesorów obsługujących strumień danych.
 W przeciwieństwie do komponentu Sender w przypadku zerwaniu połączenia
 ponownie przejście w tryb nasłuchu obsługuje klasa TCPServer.
 W momencie nawiązania połączenia klasa DataReceiverServer tworzy obiekt
 klasy DataReceiverHandler który w metodzie handle() uruchamia wątek główny
 obsługi połączenia.
 Maszyna stanów połączenia realizowana jest w klasie ServerProtocolProcessor,
 zgodnie ze schematem przedstawionym w sekcji 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Schemat-działania-systemu"

\end_inset

.
\end_layout

\begin_layout Standard
Komponent działa jednowątkowo stąd nie posiada istotnych informacji na temat
 schematu rozruchu.
\end_layout

\begin_layout Subsection
Konfiguracja i uruchamianie
\end_layout

\begin_layout Standard
Dane konfiguracyjne Receivera ponownie zawierają katalog bazowy do przechowania
 przychodzących pomiarów, adres nasłuchu oraz dane wewnętrzne.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top" width="30page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Opcja
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Typ
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Opis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
host
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Adres IP nasłuchu Receivera
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
port
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
16 bit unsigned integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Port TCP nasłuchu Receivera
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
storage_root
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ścieżka bazowa w której zapisywane będą pomiary
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
decompression
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mapa ciąg znaków na ciąg znaków
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mapowanie rozszerzenia na dekompresor
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Opcje konfiguracyjne komponentu Receiver
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:receiver_config_options"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:receiver_config_options"

\end_inset

 przedstawia dostępne opcje konfiguracyjne komponentu Receiver.
 Konfiguracja jest zdecydowanie prostsza niż komponentu Sender ze względu
 na fakt, że komponent nie prowadzi aktywnej komunikacji oraz nie przechowuje
 stanu.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/receiver_json_config.PNG

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Przykładowa konfiguracja w formacie JSON
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:receiver_config_json"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:receiver_config_json"

\end_inset

 przedstawia konfigurację Receivera w formacie JSON.
 Dekompresję należy traktować jako opcjonalną ze względu na skończoną ilość
 miejsca na dysku serwera uczelnianego.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Flaga
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Opis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-h, –help
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Wypisuje dostępne opcje konfiguracyjne
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-c, –config
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Opcjonalna ścieżka do konfiguracji w pliku w formacie JSON
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
–options
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Analogicznie jak w komponencie Sender
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Flagi rozruchowe aplikacji Receiver
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:receiver_startup_options"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:receiver_startup_options"

\end_inset

 przedstawia flagi które można przekazać do aplikacji w trakcie jej uruchamiania
, podobnie jak w Senderze dostępna jest możliwość wczytania konfiguracji
 z pliku oraz nadpisania części konfiguracji argumentami podanymi z konsoli.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/receiver_startup.PNG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Logi z rozruchu komponentu
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:receiver_startup_logs"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:receiver_startup_logs"

\end_inset

 przedstawia log z rozruchu aplikacji.
 Wyszczególniony jest tryb podania konfiguracji, oraz para (ip, port) na
 której nasłuchuje komponent.
\end_layout

\begin_layout Chapter
\noindent
Testy
\begin_inset CommandInset label
LatexCommand label
name "chap:Testy"

\end_inset


\end_layout

\begin_layout Section
Testy jednostkowe
\end_layout

\begin_layout Section
Testy przepustowości
\end_layout

\begin_layout Standard
Celem zbadania przepustowości aplikacji w konfiguracji realizującej kompresje
 stworzono środowisko testowe z interfejsem sieciowym posiadającym ograniczoną
 przepustowość.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/schemat_sieciowy_test_przepustowosc.png
	lyxscale 60
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schemat stanowiska testowego
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:schemat_stanowiska_test_obciazeniowy"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:schemat_stanowiska_test_obciazeniowy"

\end_inset

 przedstawia schemat stanowiska testowego.
 Wykorzystano komputer osobisty z systemem operacyjnym Windows 10 oraz dwie
 maszyny wirtualne służące przeprowadzeniu testu, nazwane zgodnie z komponentami
 które zostaną na nich uruchomione.
 Na maszynie wirtualnej vm-sender uruchomiono ponadto narzędzie symulujące
 komponent Labview.
 Na wykresie wyróżniono interfejsy sieciowe oraz adresy IP z nimi związane.
\end_layout

\begin_layout Standard
Sieć 192.168.0.0 służy do konfiguracji obu maszyn ze stacji roboczej za pomocą
 konsoli zdalnej SSH.
 Sieć 172.16.0.0 symuluje połączenie w warunkach roboczych systemu.
 Do ograniczenia przepustowości łącza wykorzystano program TC dostępny w
 systemie operacyjnym ubuntu.
 Wykorzystuje on subsystem jądra systemu jądra operacyjnego systemu o nazwie
 netlink do kontroli nad ilością nadawanych pakietów.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/test_tc_rate_limiting.PNG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Wykorzystanie programu tc do ograniczenia przepustowości
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:test_tc_rate_limiting"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:test_tc_rate_limiting"

\end_inset

 przedstawia sekwencję programu tc wykorzystaną do ograniczenia przepustowości.
 Na potrzeby symulacji przepustowość ograniczono do 12 KB
\backslash
s przy opóźnieniu 200ms.
 Komenda nie zwraca informacji na wyjście standardowe (ang.
 standard output), z tego powodu sprawdzony został kod błędu znajdujący
 się w zmiennej $?.
 Poprawność ustawienie zweryfikowano również za pomocą komendy show.
 Warto zauważyć, że program tc operuje na interfejsach sieciowych, stąd
 w komendach użyty jest identyfikator interfejsu - enp0s9.
 Ten sam zestaw komend został wykonany na maszynie vm-receiver.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/iperf3_start.PNG
	scale 90

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Początek działania programu iperf3
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:test_rate_limiting_verif"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:test_rate_limiting_verif"

\end_inset

 przedstawia rozruch aplikacji iperf3 służącej weryfikacji przepustowości
 sieci.
 Składa się ona z dwóch komponentów - klienta oraz serwera.
 Serwer został uruchomiony na maszynie vm-receiver z opcją nasłuchu na porcie
 50123.
 Klient został uruchomiony na maszynie vm-sender z poleceniem połączenia
 się na adres 172.16.0.1 port 50123 odpowiadający serwerowi.
 Ponadto ustawiono opcję wypisywania wyjścia w kilobajtach na sekundę oraz
 czas trwania testu na 100 sekund.
 Program wypisuje dane cząstkowe co sekundę.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/iperf3_end.PNG
	scale 90

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Podsumowanie działania programu iperf3
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:test_rate_limiting_end"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:test_rate_limiting_end"

\end_inset

 przedstawia ostatnie cząstkowe wartości oraz podsumowanie działania programu.
 Przepustowość nadawania została oszacowana na 12.2 KB/s a przepustowość
 odbioru na 11.2 KB/s.
 Ustawienia programu tc nie zostały odwzorowane dokładnie jednak można uznać
 że warunki symulacji reprezentują dostatecznie dobrze środowisko docelowe.
\end_layout

\begin_layout Standard
W ramach testu wykorzystano komponent data_provider który jest w stanie
 zasymulować działanie Labview, wymaga on podania ścieżki do katalogu z
 pomiarami.
 Wysyła on informacje o nowych pomiarach co skonfigurowany interwał.
 Kolejność wysyłania plików jest zgodna z danymi czasowymi zawartymi w nazwach
 plików oraz katalogów z pomiarami.
 Kod źródłowy symulatora znajduje się w źródłach pracy (implementacja/sync/labvi
ew_sim/data_provider.py).
\end_layout

\begin_layout Standard
Do poprawnego przeprowadzenia symulacji wymagana jest średni interwał pomiędzy
 kolejnymi rozgłoszeniami par pomiarów.
 Do wyliczenia pomiarów użyto ponownie zestawu danych z sekcji 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Analiza-ilościowa"

\end_inset

.
 Zastosowano następującą formułę:
\end_layout

\begin_layout Standard
\begin_inset Formula $N=165249$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $T=28$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $\triangle T=\frac{T*24*60*60*s}{N}=\frac{2419200}{165249}\,\frac{s}{pomiar}=14.64\:\frac{s}{pomiar}$
\end_inset


\end_layout

\begin_layout Standard
gdzie
\end_layout

\begin_layout Standard
\begin_inset Formula $N-$
\end_inset

liczba wygenerowanych plików
\end_layout

\begin_layout Standard
\begin_inset Formula $T-$
\end_inset

liczba dni
\end_layout

\begin_layout Standard
\begin_inset Formula $\triangle T-$
\end_inset

interwał pomiędzy pomiarami
\end_layout

\begin_layout Standard
Na potrzeby testu nadawano dane wygenerowane na stanowisku w Gardawicach
 dnia 06.10.2017.
\end_layout

\begin_layout Standard
Rozruch wykonano za pomocą komendy
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

python3 sync/labview_sim/data_provider.py -hs 127.0.0.1 -p 50321 -s client_storage
 --extensions lvm avi --sleep 14.64
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Flaga
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Wartość
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Opis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-hs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
127.0.0.1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Adres IP symulatora
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-p
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
50321
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Port TCP symulatora
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-s
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
client_storage
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Katalog bazowy pomiarów
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
–extensions
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
lvm avi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rozgłaszane roszerzenia plików
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
–sleep
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
14.64
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Czas pomiędzy kolejnymi rozgłoszeniami
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Argumenty rozruchowe symulatora
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:rys_provider_args"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tabela 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:rys_provider_args"

\end_inset

 przedstawia flagi z jakimi został uruchomiony symulator Labview.
 Aplikacja nasłuchuje na interfejsie lokalnym porcie 50321, katalog z pomiarami
 został zdefiniowany relatywnie do katalogu rozruchu aplikacji, monitorowane
 rozszerzenia ustawione zostały zgodnie z wymaganiami pracy a wartość opóźnienia
 zgodnie z wyliczoną wartością.
\end_layout

\begin_layout Standard
Komponent Receiver został uruchomiony za pomocą następującej komendy
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

python3 server.py -c server.json
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/test_receiver_config.PNG

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Konfiguracja testowa komponentu Receiver
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:test_receiver_configuration"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:test_receiver_configuration"

\end_inset

 przedstawia konfigurację komponentu Sender na potrzeby testu.
 Został on skonfigurowany do nasłuchu pod adresem 127.16.0.1:50123 odpowiadającym
 sieci testowej, katalog bazowy pomiarów przyjął wartość server_storage.
 Ponadto pliki lvm zostaną zdekompresowane po odebraniu.
\end_layout

\begin_layout Standard
Komponent Sender został uruchomiony za pomocą następującej komendy
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

python3 client.py -c client.json
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/test_sender_config.PNG

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Konfiguracja testowa komponentu Sender
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:test_sender_config"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:test_sender_config"

\end_inset

 przedstawia konfigurację komponentu Receiver na potrzeby testu.
 Wartości par host:port klauzul 
\begin_inset Quotes pld
\end_inset

server
\begin_inset Quotes prd
\end_inset

 i 
\begin_inset Quotes pld
\end_inset

provider
\begin_inset Quotes prd
\end_inset

 odpowiadają konfiguracjom symulatora oraz Receivera.
 Zarówno Sender jak i symulator Labview zostały uruchomione na maszynie
 vm-sender.
 Ponadto obie aplikacje współdzielą katalog w którym zostały uruchomione,
 stąd katalog bazowy pomiarów - client_storage - wskazuje w obu przypadkach
 na tą samą lokalizację.
 Schemat kompresji zgodnie z wnioskami z sekcji 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Kompresja"

\end_inset

.
\end_layout

\begin_layout Standard
Wartością testu jest stan kolejki dyskowej, w przypadku dostatecznej przepustowo
ści jej długość powinna posiadać obserwowalną maksymalną wartość.
 Narastająca ilość plików oznacza niedostateczną przepustowość.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename img/test_queue_monitor_script.PNG
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Skrypt monitorujący stan kolejki
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "rys:test_monitoring_script"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Rys.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "rys:test_monitoring_script"

\end_inset

 przedstawia skrypt w języku Python za pomocą którego monitorowano stan
 kolejki dyskowej.
 Przyjmuje on dwa argumenty
\end_layout

\begin_layout Enumerate
Ścieżkę do pliku przechowującego stan kolejki
\end_layout

\begin_layout Enumerate
Ścieżkę do logu stanu kolejki
\end_layout

\begin_layout Standard
W trakcie działania wykonuje on zapytanie SELECT count(*) FROM queue które
 zlicza ilość wpisów w tabeli, każdy wpis odpowiada pojedynczemu elementowi
 w kolejce.
 Wartość następnie jest zapisywana w formacie CSV do pliku razem z czasem
 wykonania pomiaru.
 Skrypt został uruchomiony w następujący sposób.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

python3 measure.py state_storage/stage.queue state_storage/queue.log
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Skrypt uruchomiono w tym samym katalogu co komponent Sender oraz symulator
 Labview.
\end_layout

\begin_layout Chapter
Podsumowanie
\begin_inset CommandInset label
LatexCommand label
name "chap:Podsumowanie"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
bibfiles "bibliografia"
options "bibtotoc,bst/IEEEtran"

\end_inset


\end_layout

\end_body
\end_document
